import{aV as me,aW as $e,aX as He,aY as Qe,aZ as Q,a_ as We,a$ as ce,b0 as Xe,b1 as Ye,f as F,i as U,j as s,u as B,a as $,k as I,c as H,b2 as G,Q as Ge,V as W,D as L,B as b,aa as ge,T as y,ab as pe,aT as xe,b3 as V,r as E,e as K,a4 as Ve,a5 as Ke,a6 as qe,a7 as de,a8 as _,a9 as Ze,b4 as ve,af as Je,b5 as et,ag as tt,K as Ce,S,b as A,b6 as nt,_ as Z,b7 as rt,J as st,aG as D,b8 as R,aL as ot,aM as at,aP as it,aQ as lt,b9 as ct,ba as dt,bb as ut,A as ht,bc as ft,bd as mt,be as gt,aH as pt,aI as xt,bf as vt,aJ as Ct,bg as jt,bh as Et,h as je,bi as bt,o as yt,y as X,ak as Mt,bj as wt,al as Ee,bk as It,bl as _t,aU as Rt,C as At,bm as Pt}from"./index-EsfKg_w_.js";import{B as ue}from"./bot-XLfQWT26.js";import{D as St}from"./dialog-confirm-delete-QvjF9mEJ.js";function Nt(i){return me({},i)}var he=1440,Dt=2520,q=43200,Tt=86400;function Lt(i,o,c){var l,g;$e(2,arguments);var f=Ye(),h=(l=(g=c==null?void 0:c.locale)!==null&&g!==void 0?g:f.locale)!==null&&l!==void 0?l:He;if(!h.formatDistance)throw new RangeError("locale must contain formatDistance property");var p=Qe(i,o);if(isNaN(p))throw new RangeError("Invalid time value");var e=me(Nt(c),{addSuffix:!!(c!=null&&c.addSuffix),comparison:p}),n,t;p>0?(n=Q(o),t=Q(i)):(n=Q(i),t=Q(o));var r=We(t,n),a=(ce(t)-ce(n))/1e3,d=Math.round((r-a)/60),u;if(d<2)return c!=null&&c.includeSeconds?r<5?h.formatDistance("lessThanXSeconds",5,e):r<10?h.formatDistance("lessThanXSeconds",10,e):r<20?h.formatDistance("lessThanXSeconds",20,e):r<40?h.formatDistance("halfAMinute",0,e):r<60?h.formatDistance("lessThanXMinutes",1,e):h.formatDistance("xMinutes",1,e):d===0?h.formatDistance("lessThanXMinutes",1,e):h.formatDistance("xMinutes",d,e);if(d<45)return h.formatDistance("xMinutes",d,e);if(d<90)return h.formatDistance("aboutXHours",1,e);if(d<he){var C=Math.round(d/60);return h.formatDistance("aboutXHours",C,e)}else{if(d<Dt)return h.formatDistance("xDays",1,e);if(d<q){var v=Math.round(d/he);return h.formatDistance("xDays",v,e)}else if(d<Tt)return u=Math.round(d/q),h.formatDistance("aboutXMonths",u,e)}if(u=Xe(t,n),u<12){var w=Math.round(d/q);return h.formatDistance("xMonths",w,e)}else{var x=u%12,m=Math.floor(u/12);return x<3?h.formatDistance("aboutXYears",m,e):x<9?h.formatDistance("overXYears",m,e):h.formatDistance("almostXYears",m+1,e)}}var J={},Bt=U;Object.defineProperty(J,"__esModule",{value:!0});var be=J.default=void 0,kt=Bt(F()),Ot=s,zt=(0,kt.default)((0,Ot.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined");be=J.default=zt;const Ft=({data:i})=>{var g;B();const{t:o}=$(),{knowledges:c}=I(f=>f.knowledge),l=f=>{const h=ue[f];return s.jsx(s.Fragment,{children:s.jsxs(b,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"center"},children:[s.jsx(pe,{style:{maxWidth:"80%"},color:h==null?void 0:h.color,label:h==null?void 0:h.label}),f===ue.SYNCING.value&&s.jsx(xe,{style:{height:"2px",width:"auto"}})]})})};return s.jsxs(H,{sx:{width:"650px"},children:[s.jsx(G,{titleTypographyProps:{variant:"h4"},title:"Thông tin Bot",action:s.jsx(Ge,{arrow:!0,placement:"top",title:o("Sửa thông tin bot"),children:s.jsx(W,{color:"primary",children:s.jsx(be,{})})})}),s.jsx(L,{}),s.jsxs(b,{textAlign:"center",position:"relative",p:{xs:2,sm:3,md:6},children:[s.jsx(ge,{sx:{mx:"auto",mb:1.5,width:94,height:94},src:i==null?void 0:i.icon}),l(i==null?void 0:i.botStatus),s.jsx(y,{sx:{pt:2},variant:"h3",children:i==null?void 0:i.botName}),s.jsx(y,{variant:"subtitle1",color:"text.secondary",children:(g=c.find(f=>f.knowId===(i==null?void 0:i.knowId)))==null?void 0:g.knowName}),s.jsx(y,{sx:{pt:1},style:{fontSize:16},color:"text.secondary",children:i==null?void 0:i.botDescription})]})]})};var ee={},Ut=U;Object.defineProperty(ee,"__esModule",{value:!0});var ye=ee.default=void 0,$t=Ut(F()),Ht=s,Qt=(0,$t.default)((0,Ht.jsx)("path",{d:"M14.71 6.71a.9959.9959 0 0 0-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L10.83 12l3.88-3.88c.39-.39.38-1.03 0-1.41z"}),"ChevronLeftRounded");ye=ee.default=Qt;var te={},Wt=U;Object.defineProperty(te,"__esModule",{value:!0});var Me=te.default=void 0,Xt=Wt(F()),Yt=s,Gt=(0,Xt.default)((0,Yt.jsx)("path",{d:"M9.29 6.71c-.39.39-.39 1.02 0 1.41L13.17 12l-3.88 3.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z"}),"ChevronRightRounded");Me=te.default=Gt;var ne={},Vt=U;Object.defineProperty(ne,"__esModule",{value:!0});var we=ne.default=void 0,Kt=Vt(F()),qt=s,Zt=(0,Kt.default)((0,qt.jsx)("path",{d:"M11.29 8.71 6.7 13.3c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.38-.39-1.02-.39-1.41 0z"}),"ExpandLessRounded");we=ne.default=Zt;var re={},Jt=U;Object.defineProperty(re,"__esModule",{value:!0});var Ie=re.default=void 0,en=Jt(F()),tn=s,nn=(0,en.default)((0,tn.jsx)("path",{d:"M15.88 9.29 12 13.17 8.12 9.29a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z"}),"ExpandMoreRounded");Ie=re.default=nn;const rn=({tableData:i})=>{const{t:o}=$();B();const{id:c}=V(),l=I(x=>x.auth.admin),[g,f]=E.useState({key:"dateCreated",direction:"ascending"}),[h,p]=E.useState(0),[e,n]=E.useState(3),t=(x,m)=>{p(m)},r=x=>{n(parseInt(x.target.value,10)),p(0)},a=(x,m)=>[...x].sort((j,M)=>j[m.key]<M[m.key]?m.direction==="ascending"?-1:1:j[m.key]>M[m.key]?m.direction==="ascending"?1:-1:0),d=x=>{let m="ascending";g.key===x&&g.direction==="ascending"&&(m="descending"),f({key:x,direction:m})},u=x=>g.key!==x?null:g.direction==="ascending"?s.jsx(Ie,{sx:{color:"text.secondary"},fontSize:"small"}):s.jsx(we,{sx:{color:"text.secondary"},fontSize:"small"}),v=a(i,g).slice(h*e,h*e+e),w=x=>{try{const m=nt({botId:c,customerId:l.customerId});Z.success(o(m.data))}catch(m){Z.error(o("Something wrong please try again!")),console.log(m)}};return s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(G,{titleTypographyProps:{variant:"h4"},title:"Lịch sử training dữ liệu"}),s.jsx(L,{}),s.jsxs(K,{children:[s.jsx(Ve,{children:s.jsxs(Ke,{children:[s.jsx(qe,{children:s.jsxs(de,{children:[s.jsx(_,{onClick:()=>d("filename"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Tên file")," ",u("filename")]})}),s.jsx(_,{onClick:()=>d("owner"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Người training")," ",u("owner")]})}),s.jsx(_,{onClick:()=>d("owner"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Tags")," ",u("owner")]})}),s.jsx(_,{onClick:()=>d("dateCreated"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Ngày tạo")," ",u("dateCreated")]})}),s.jsx(_,{align:"right",children:o("Actions")})]})}),s.jsx(Ze,{children:v.map(x=>s.jsxs(de,{hover:!0,children:[s.jsx(_,{children:s.jsxs(b,{display:"flex",alignItems:"center",children:[ve(x.fileName),s.jsx(y,{sx:{pl:1},variant:"h6",children:x.fileName})]})}),s.jsx(_,{children:s.jsxs(b,{display:"flex",alignItems:"center",children:[x.avatarUrl?s.jsx(ge,{src:x.avatarUrl,sx:{mr:1,height:28,width:28}}):null,s.jsx(Je,{href:"",onClick:m=>m.preventDefault(),underline:"hover",variant:"h6",noWrap:!0,fontWeight:500,children:x.userId})]})}),s.jsx(_,{children:x==null?void 0:x.tags.map((m,j)=>s.jsx(pe,{sx:{margin:"5px"},label:m.tagName,size:"small",variant:"outlined"},m.tagId))}),s.jsx(_,{children:s.jsx(y,{variant:"h6",fontWeight:400,noWrap:!0,children:Lt(new Date(x.createDate),new Date,{addSuffix:!0})})}),s.jsx(_,{sx:{whiteSpace:"nowrap"},align:"right",children:s.jsx(St,{onConfirm:()=>w(x==null?void 0:x.botId)})})]},x.id))})]})}),s.jsx(et,{sx:{p:2,".MuiTablePagination-toolbar":{justifyContent:"space-between"},".MuiTablePagination-spacer":{display:"none"}},children:s.jsx(tt,{component:"div",count:i.length,page:h,onPageChange:t,rowsPerPage:e,onRowsPerPageChange:r,rowsPerPageOptions:[3],ActionsComponent:sn})})]})]})},sn=({count:i,page:o,onPageChange:c})=>{const l=h=>{c(h,o-1)},g=h=>{c(h,o+1)},f=Ce(h=>h.breakpoints.up("sm"));return s.jsx(S,{direction:"row",spacing:1,children:f?s.jsxs(s.Fragment,{children:[s.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:l,disabled:o===0,children:"Trang trước"}),s.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:g,disabled:o>=Math.ceil(i/3)-1,children:"Trang sau"})]}):s.jsxs(s.Fragment,{children:[s.jsx(W,{variant:"outlined",color:"secondary",size:"small",onClick:l,disabled:o===0,startIcon:s.jsx(ye,{})}),s.jsx(W,{variant:"outlined",color:"secondary",size:"small",onClick:g,disabled:o>=Math.ceil(i/3)-1,startIcon:s.jsx(Me,{})})]})})},on=async i=>{try{return await rt("http://52.221.236.203:8085/bot-edge/api/v1/bot/embed/files",i)}catch(o){throw console.error("Error embed files:",o),o}};st(A)(({theme:i})=>({background:D(i.palette.common.white,.08),color:D(i.palette.common.white,.9),borderColor:D(i.palette.common.white,.12),"&:hover":{background:D(i.palette.common.white,.1),color:i.palette.common.white},"&.MuiButton-outlined":{borderColor:D(i.palette.common.white,.12),"&:hover":{borderColor:D(i.palette.common.white,.16)}}}));var an=Object.defineProperty,Y=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,fe=(i,o,c)=>o in i?an(i,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[o]=c,z=(i,o)=>{for(var c in o||(o={}))_e.call(o,c)&&fe(i,c,o[c]);if(Y)for(var c of Y(o))Re.call(o,c)&&fe(i,c,o[c]);return i},se=(i,o)=>{var c={};for(var l in i)_e.call(i,l)&&o.indexOf(l)<0&&(c[l]=i[l]);if(i!=null&&Y)for(var l of Y(i))o.indexOf(l)<0&&Re.call(i,l)&&(c[l]=i[l]);return c};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var N;(i=>{const o=class{constructor(e,n,t,r){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<o.MIN_VERSION||e>o.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let a=[];for(let u=0;u<this.size;u++)a.push(!1);for(let u=0;u<this.size;u++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const d=this.addEccAndInterleave(t);if(this.drawCodewords(d),r==-1){let u=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const v=this.getPenaltyScore();v<u&&(r=C,u=v),this.applyMask(C)}}f(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,n){const t=i.QrSegment.makeSegments(e);return o.encodeSegments(t,n)}static encodeBinary(e,n){const t=i.QrSegment.makeBytes(e);return o.encodeSegments([t],n)}static encodeSegments(e,n,t=1,r=40,a=-1,d=!0){if(!(o.MIN_VERSION<=t&&t<=r&&r<=o.MAX_VERSION)||a<-1||a>7)throw new RangeError("Invalid value");let u,C;for(u=t;;u++){const m=o.getNumDataCodewords(u,n)*8,j=p.getTotalBits(e,u);if(j<=m){C=j;break}if(u>=r)throw new RangeError("Data too long")}for(const m of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])d&&C<=o.getNumDataCodewords(u,m)*8&&(n=m);let v=[];for(const m of e){l(m.mode.modeBits,4,v),l(m.numChars,m.mode.numCharCountBits(u),v);for(const j of m.getData())v.push(j)}f(v.length==C);const w=o.getNumDataCodewords(u,n)*8;f(v.length<=w),l(0,Math.min(4,w-v.length),v),l(0,(8-v.length%8)%8,v),f(v.length%8==0);for(let m=236;v.length<w;m^=253)l(m,8,v);let x=[];for(;x.length*8<v.length;)x.push(0);return v.forEach((m,j)=>x[j>>>3]|=m<<7-(j&7)),new o(u,n,x,a)}getModule(e,n){return 0<=e&&e<this.size&&0<=n&&n<this.size&&this.modules[n][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),n=e.length;for(let t=0;t<n;t++)for(let r=0;r<n;r++)t==0&&r==0||t==0&&r==n-1||t==n-1&&r==0||this.drawAlignmentPattern(e[t],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const n=this.errorCorrectionLevel.formatBits<<3|e;let t=n;for(let a=0;a<10;a++)t=t<<1^(t>>>9)*1335;const r=(n<<10|t)^21522;f(r>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,g(r,a));this.setFunctionModule(8,7,g(r,6)),this.setFunctionModule(8,8,g(r,7)),this.setFunctionModule(7,8,g(r,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,g(r,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,g(r,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,g(r,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;const n=this.version<<12|e;f(n>>>18==0);for(let t=0;t<18;t++){const r=g(n,t),a=this.size-11+t%3,d=Math.floor(t/3);this.setFunctionModule(a,d,r),this.setFunctionModule(d,a,r)}}drawFinderPattern(e,n){for(let t=-4;t<=4;t++)for(let r=-4;r<=4;r++){const a=Math.max(Math.abs(r),Math.abs(t)),d=e+r,u=n+t;0<=d&&d<this.size&&0<=u&&u<this.size&&this.setFunctionModule(d,u,a!=2&&a!=4)}}drawAlignmentPattern(e,n){for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,n+t,Math.max(Math.abs(r),Math.abs(t))!=1)}setFunctionModule(e,n,t){this.modules[n][e]=t,this.isFunction[n][e]=!0}addEccAndInterleave(e){const n=this.version,t=this.errorCorrectionLevel;if(e.length!=o.getNumDataCodewords(n,t))throw new RangeError("Invalid argument");const r=o.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][n],a=o.ECC_CODEWORDS_PER_BLOCK[t.ordinal][n],d=Math.floor(o.getNumRawDataModules(n)/8),u=r-d%r,C=Math.floor(d/r);let v=[];const w=o.reedSolomonComputeDivisor(a);for(let m=0,j=0;m<r;m++){let M=e.slice(j,j+C-a+(m<u?0:1));j+=M.length;const k=o.reedSolomonComputeRemainder(M,w);m<u&&M.push(0),v.push(M.concat(k))}let x=[];for(let m=0;m<v[0].length;m++)v.forEach((j,M)=>{(m!=C-a||M>=u)&&x.push(j[m])});return f(x.length==d),x}drawCodewords(e){if(e.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){t==6&&(t=5);for(let r=0;r<this.size;r++)for(let a=0;a<2;a++){const d=t-a,C=(t+1&2)==0?this.size-1-r:r;!this.isFunction[C][d]&&n<e.length*8&&(this.modules[C][d]=g(e[n>>>3],7-(n&7)),n++)}}f(n==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let t=0;t<this.size;t++){let r;switch(e){case 0:r=(t+n)%2==0;break;case 1:r=n%2==0;break;case 2:r=t%3==0;break;case 3:r=(t+n)%3==0;break;case 4:r=(Math.floor(t/3)+Math.floor(n/2))%2==0;break;case 5:r=t*n%2+t*n%3==0;break;case 6:r=(t*n%2+t*n%3)%2==0;break;case 7:r=((t+n)%2+t*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][t]&&r&&(this.modules[n][t]=!this.modules[n][t])}}getPenaltyScore(){let e=0;for(let a=0;a<this.size;a++){let d=!1,u=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[a][v]==d?(u++,u==5?e+=o.PENALTY_N1:u>5&&e++):(this.finderPenaltyAddHistory(u,C),d||(e+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),d=this.modules[a][v],u=1);e+=this.finderPenaltyTerminateAndCount(d,u,C)*o.PENALTY_N3}for(let a=0;a<this.size;a++){let d=!1,u=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][a]==d?(u++,u==5?e+=o.PENALTY_N1:u>5&&e++):(this.finderPenaltyAddHistory(u,C),d||(e+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),d=this.modules[v][a],u=1);e+=this.finderPenaltyTerminateAndCount(d,u,C)*o.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let d=0;d<this.size-1;d++){const u=this.modules[a][d];u==this.modules[a][d+1]&&u==this.modules[a+1][d]&&u==this.modules[a+1][d+1]&&(e+=o.PENALTY_N2)}let n=0;for(const a of this.modules)n=a.reduce((d,u)=>d+(u?1:0),n);const t=this.size*this.size,r=Math.ceil(Math.abs(n*20-t*10)/t)-1;return f(0<=r&&r<=9),e+=r*o.PENALTY_N4,f(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,n=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let t=[6];for(let r=this.size-7;t.length<e;r-=n)t.splice(1,0,r);return t}}static getNumRawDataModules(e){if(e<o.MIN_VERSION||e>o.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return f(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(o.getNumRawDataModules(e)/8)-o.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*o.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let r=0;r<e-1;r++)n.push(0);n.push(1);let t=1;for(let r=0;r<e;r++){for(let a=0;a<n.length;a++)n[a]=o.reedSolomonMultiply(n[a],t),a+1<n.length&&(n[a]^=n[a+1]);t=o.reedSolomonMultiply(t,2)}return n}static reedSolomonComputeRemainder(e,n){let t=n.map(r=>0);for(const r of e){const a=r^t.shift();t.push(0),n.forEach((d,u)=>t[u]^=o.reedSolomonMultiply(d,a))}return t}static reedSolomonMultiply(e,n){if(e>>>8||n>>>8)throw new RangeError("Byte out of range");let t=0;for(let r=7;r>=0;r--)t=t<<1^(t>>>7)*285,t^=(n>>>r&1)*e;return f(t>>>8==0),t}finderPenaltyCountPatterns(e){const n=e[1];f(n<=this.size*3);const t=n>0&&e[2]==n&&e[3]==n*3&&e[4]==n&&e[5]==n;return(t&&e[0]>=n*4&&e[6]>=n?1:0)+(t&&e[6]>=n*4&&e[0]>=n?1:0)}finderPenaltyTerminateAndCount(e,n,t){return e&&(this.finderPenaltyAddHistory(n,t),n=0),n+=this.size,this.finderPenaltyAddHistory(n,t),this.finderPenaltyCountPatterns(t)}finderPenaltyAddHistory(e,n){n[0]==0&&(e+=this.size),n.pop(),n.unshift(e)}};let c=o;c.MIN_VERSION=1,c.MAX_VERSION=40,c.PENALTY_N1=3,c.PENALTY_N2=3,c.PENALTY_N3=40,c.PENALTY_N4=10,c.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],c.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=c;function l(e,n,t){if(n<0||n>31||e>>>n)throw new RangeError("Value out of range");for(let r=n-1;r>=0;r--)t.push(e>>>r&1)}function g(e,n){return(e>>>n&1)!=0}function f(e){if(!e)throw new Error("Assertion error")}const h=class{constructor(e,n,t){if(this.mode=e,this.numChars=n,this.bitData=t,n<0)throw new RangeError("Invalid argument");this.bitData=t.slice()}static makeBytes(e){let n=[];for(const t of e)l(t,8,n);return new h(h.Mode.BYTE,e.length,n)}static makeNumeric(e){if(!h.isNumeric(e))throw new RangeError("String contains non-numeric characters");let n=[];for(let t=0;t<e.length;){const r=Math.min(e.length-t,3);l(parseInt(e.substr(t,r),10),r*3+1,n),t+=r}return new h(h.Mode.NUMERIC,e.length,n)}static makeAlphanumeric(e){if(!h.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n=[],t;for(t=0;t+2<=e.length;t+=2){let r=h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t))*45;r+=h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),l(r,11,n)}return t<e.length&&l(h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,n),new h(h.Mode.ALPHANUMERIC,e.length,n)}static makeSegments(e){return e==""?[]:h.isNumeric(e)?[h.makeNumeric(e)]:h.isAlphanumeric(e)?[h.makeAlphanumeric(e)]:[h.makeBytes(h.toUtf8ByteArray(e))]}static makeEci(e){let n=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)l(e,8,n);else if(e<16384)l(2,2,n),l(e,14,n);else if(e<1e6)l(6,3,n),l(e,21,n);else throw new RangeError("ECI assignment value out of range");return new h(h.Mode.ECI,0,n)}static isNumeric(e){return h.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return h.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,n){let t=0;for(const r of e){const a=r.mode.numCharCountBits(n);if(r.numChars>=1<<a)return 1/0;t+=4+a+r.bitData.length}return t}static toUtf8ByteArray(e){e=encodeURI(e);let n=[];for(let t=0;t<e.length;t++)e.charAt(t)!="%"?n.push(e.charCodeAt(t)):(n.push(parseInt(e.substr(t+1,2),16)),t+=2);return n}};let p=h;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=p})(N||(N={}));(i=>{(o=>{const c=class{constructor(g,f){this.ordinal=g,this.formatBits=f}};let l=c;l.LOW=new c(0,1),l.MEDIUM=new c(1,0),l.QUARTILE=new c(2,3),l.HIGH=new c(3,2),o.Ecc=l})(i.QrCode||(i.QrCode={}))})(N||(N={}));(i=>{(o=>{const c=class{constructor(g,f){this.modeBits=g,this.numBitsCharCount=f}numCharCountBits(g){return this.numBitsCharCount[Math.floor((g+7)/17)]}};let l=c;l.NUMERIC=new c(1,[10,12,14]),l.ALPHANUMERIC=new c(2,[9,11,13]),l.BYTE=new c(4,[8,16,16]),l.KANJI=new c(8,[8,10,12]),l.ECI=new c(7,[0,0,0]),o.Mode=l})(i.QrSegment||(i.QrSegment={}))})(N||(N={}));var T=N;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Ae={L:T.QrCode.Ecc.LOW,M:T.QrCode.Ecc.MEDIUM,Q:T.QrCode.Ecc.QUARTILE,H:T.QrCode.Ecc.HIGH},Pe=128,Se="L",Ne="#FFFFFF",De="#000000",Te=!1,oe=4,ln=.1;function Le(i,o=0){const c=[];return i.forEach(function(l,g){let f=null;l.forEach(function(h,p){if(!h&&f!==null){c.push(`M${f+o} ${g+o}h${p-f}v1H${f+o}z`),f=null;return}if(p===l.length-1){if(!h)return;f===null?c.push(`M${p+o},${g+o} h1v1H${p+o}z`):c.push(`M${f+o},${g+o} h${p+1-f}v1H${f+o}z`);return}h&&f===null&&(f=p)})}),c.join("")}function Be(i,o){return i.slice().map((c,l)=>l<o.y||l>=o.y+o.h?c:c.map((g,f)=>f<o.x||f>=o.x+o.w?g:!1))}function ke(i,o,c,l){if(l==null)return null;const g=c?oe:0,f=i.length+g*2,h=Math.floor(o*ln),p=f/o,e=(l.width||h)*p,n=(l.height||h)*p,t=l.x==null?i.length/2-e/2:l.x*p,r=l.y==null?i.length/2-n/2:l.y*p;let a=null;if(l.excavate){let d=Math.floor(t),u=Math.floor(r),C=Math.ceil(e+t-d),v=Math.ceil(n+r-u);a={x:d,y:u,w:C,h:v}}return{x:t,y:r,h:n,w:e,excavation:a}}var cn=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function dn(i){const o=i,{value:c,size:l=Pe,level:g=Se,bgColor:f=Ne,fgColor:h=De,includeMargin:p=Te,style:e,imageSettings:n}=o,t=se(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),r=n==null?void 0:n.src,a=E.useRef(null),d=E.useRef(null),[u,C]=E.useState(!1);E.useEffect(()=>{if(a.current!=null){const x=a.current,m=x.getContext("2d");if(!m)return;let j=T.QrCode.encodeText(c,Ae[g]).getModules();const M=p?oe:0,k=j.length+M*2,P=ke(j,l,p,n),O=d.current,ae=P!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;ae&&P.excavation!=null&&(j=Be(j,P.excavation));const ie=window.devicePixelRatio||1;x.height=x.width=l*ie;const le=l/k*ie;m.scale(le,le),m.fillStyle=f,m.fillRect(0,0,k,k),m.fillStyle=h,cn?m.fill(new Path2D(Le(j,M))):j.forEach(function(Oe,ze){Oe.forEach(function(Fe,Ue){Fe&&m.fillRect(Ue+M,ze+M,1,1)})}),ae&&m.drawImage(O,P.x+M,P.y+M,P.w,P.h)}}),E.useEffect(()=>{C(!1)},[r]);const v=z({height:l,width:l},e);let w=null;return r!=null&&(w=R.createElement("img",{src:r,key:r,style:{display:"none"},onLoad:()=>{C(!0)},ref:d})),R.createElement(R.Fragment,null,R.createElement("canvas",z({style:v,height:l,width:l,ref:a},t)),w)}function un(i){const o=i,{value:c,size:l=Pe,level:g=Se,bgColor:f=Ne,fgColor:h=De,includeMargin:p=Te,imageSettings:e}=o,n=se(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let t=T.QrCode.encodeText(c,Ae[g]).getModules();const r=p?oe:0,a=t.length+r*2,d=ke(t,l,p,e);let u=null;e!=null&&d!=null&&(d.excavation!=null&&(t=Be(t,d.excavation)),u=R.createElement("image",{xlinkHref:e.src,height:d.h,width:d.w,x:d.x+r,y:d.y+r,preserveAspectRatio:"none"}));const C=Le(t,r);return R.createElement("svg",z({height:l,width:l,viewBox:`0 0 ${a} ${a}`},n),R.createElement("path",{fill:f,d:`M0,0 h${a}v${a}H0z`,shapeRendering:"crispEdges"}),R.createElement("path",{fill:h,d:C,shapeRendering:"crispEdges"}),u)}var hn=i=>{const o=i,{renderAs:c}=o,l=se(o,["renderAs"]);return c==="svg"?R.createElement(un,z({},l)):R.createElement(dn,z({},l))};const fn=()=>{const i=B(),o=Ce(i.breakpoints.down("sm")),[c,l]=E.useState(!1),g=()=>{l(!0)},f=()=>{l(!1)},p={bankName:"Ngân hàng X",accountNumber:"123456789",paymentAmount:"500,000 VNĐ",invoiceNumber:"123456"};return s.jsxs(s.Fragment,{children:[s.jsx(A,{variant:"contained",color:"success",onClick:()=>g(),children:"Payment"}),s.jsxs(ot,{fullScreen:o,open:c,onClose:f,"aria-labelledby":"basic-dialog-title",maxWidth:"xs",fullWidth:!0,children:[s.jsx(at,{id:"basic-dialog-title",children:"Thanh toán"}),s.jsxs(it,{children:[s.jsx(y,{variant:"h6",children:"Thông tin phí"}),s.jsx(y,{children:"Số file / dung lượng nạp: 10 files / 500MB"}),s.jsx(y,{children:"Phí chi trả: 500,000 VNĐ"}),s.jsx(y,{variant:"h6",style:{marginTop:"20px"},children:"Mã QR"}),s.jsx(b,{display:"flex",justifyContent:"center",style:{margin:"20px"},children:s.jsx(hn,{value:`bank:${p.bankName};account:${p.accountNumber};amount:${p.paymentAmount};invoice:${p.invoiceNumber}`,size:300})}),s.jsxs(y,{children:["- Phí cần thanh toán: ",p.paymentAmount]}),s.jsxs(y,{children:["- Nội dung chuyển khoản: Số hóa đơn ",p.invoiceNumber]}),s.jsx(y,{variant:"body2",children:"Chú ý: Nội dung chuyển khoản bắt buộc chứa Số hóa đơn"})]}),s.jsxs(lt,{children:[s.jsx(A,{onClick:f,color:"primary",children:"Quay lại"}),s.jsx(A,{onClick:f,color:"primary",children:"Tiếp tục"})]})]})]})},mn=(i,o=2)=>{if(i===0)return"0 Bytes";const c=1024,l=o<0?0:o,g=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],f=Math.floor(Math.log(i)/Math.log(c));return parseFloat((i/Math.pow(c,f)).toFixed(l))+" "+g[f]},gn=({files:i,setFiles:o})=>{const[c,l]=E.useState({});I(t=>t.auth.admin),V();const g=E.useCallback(t=>{t.forEach(r=>{l(a=>({...a,[r.name]:{progress:0}}))}),o(r=>[...r,...t.map(a=>({file:a,progress:0}))]),t.forEach(r=>{(d=>{const u=setInterval(()=>{l(C=>{if(!C[d.name])return clearInterval(u),C;const v=C[d.name].progress,w=Math.min(v+10,100);return w===100&&clearInterval(u),{...C,[d.name]:{progress:w}}})},200)})(r)})},[]),{getRootProps:f,isDragActive:h,isDragAccept:p,isDragReject:e}=ct({onDrop:g,accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxFiles:10}),n=t=>{o(r=>r.filter(({file:a})=>a.name!==t)),l(r=>{const a={...r};return delete a[t],a}),c[t]&&URL.revokeObjectURL(c[t].url)};return s.jsxs(s.Fragment,{children:[s.jsx(dt,{variant:"outlined",elevation:0,sx:{borderWidth:1},children:s.jsx(ut,{...f(),children:s.jsx(K,{children:s.jsxs(S,{spacing:1,justifyContent:"center",direction:"column",alignItems:"center",children:[s.jsxs(ht,{state:"secondary",isSoft:!0,variant:"rounded",sx:{borderWidth:1,borderStyle:"solid",borderColor:t=>t.palette.mode==="dark"?"neutral.800":"neutral.400",backgroundColor:"background.paper"},children:[e&&s.jsx(ft,{fontSize:"small",sx:{color:"error.main"}}),p&&s.jsx(mt,{fontSize:"small",sx:{color:"success.main"}}),!h&&s.jsx(gt,{fontSize:"small",sx:{color:"text.primary"}})]}),s.jsx(b,{children:s.jsxs(y,{textAlign:"center",variant:"h6",fontWeight:400,color:p?"success.main":e?"error.main":"text.secondary",children:[s.jsx(y,{variant:"h6",fontWeight:600,component:"span",color:p?"success.main":e?"error.main":"primary.main",children:"Nhấp để tải lên"})," ","hoặc kéo và thả tài liệu vào đây. Tối đa 10 tệp"]})})]})})})}),i&&i.length>0?s.jsx(pt,{component:"div",disablePadding:!0,children:s.jsx(S,{spacing:2,mt:2,children:i.map(({file:t})=>{var r,a;return s.jsx(H,{variant:"outlined",elevation:0,sx:{"&:hover":{borderColor:d=>d.palette.mode==="dark"?"neutral.800":"neutral.500"}},children:s.jsxs(xt,{component:"div",alignItems:"flex-start",children:[s.jsx(vt,{sx:{minWidth:38,color:"neutral.700"},children:ve(t.name)}),s.jsx(Ct,{primary:s.jsxs(b,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",children:[s.jsxs(b,{overflow:"hidden",children:[s.jsx(y,{noWrap:!0,variant:"subtitle1",fontWeight:500,color:"text.primary",children:t.name}),s.jsx(y,{variant:"subtitle2",color:"text.secondary",children:mn(t.size)})]}),s.jsx(W,{"aria-label":"delete",onClick:()=>n(t.name),size:"small",color:"error",children:s.jsx(jt,{fontSize:"small"})})]}),disableTypography:!0,secondary:s.jsxs(b,{display:"flex",alignItems:"center",children:[s.jsx(b,{flex:1,children:s.jsx(xe,{variant:"determinate",value:((r=c[t.name])==null?void 0:r.progress)||0})}),s.jsxs(y,{variant:"subtitle2",sx:{pl:.5},children:[((a=c[t.name])==null?void 0:a.progress)||0,"%"]})]})})]})},t.name)})})}):s.jsxs(S,{spacing:.5,justifyContent:"center",direction:"column",alignItems:"center",pt:3,pb:2,children:[s.jsxs(b,{textAlign:"center",children:[s.jsx(y,{variant:"h5",color:"text.primary",children:"Không có tệp nào được thêm vào"}),s.jsx(y,{color:"text.secondary",fontWeight:400,children:"Vui lòng tải lên các tài liệu cần thiết"})]}),s.jsx(b,{width:"100%",children:s.jsx(L,{flexItem:!0,sx:{my:1,mx:"auto",width:"55%"}})}),s.jsx(A,{startIcon:s.jsx(Et,{}),variant:"outlined",color:"secondary",size:"small",...f(),children:"Thêm tệp"})]})]})},pn=({onEmbed:i})=>{B();const{t:o}=$(),[c,l]=E.useState([]),[g,f]=E.useState([]);E.useState(!1);const h=I(d=>d.auth.admin),{id:p}=V(),e=je(),n=I(d=>d.common.loading),t=I(d=>d.common.refresh),r=async d=>{try{const u=await wt({file:d,botId:p,userId:h.id,customerId:h.customerId,isPublic:!1});return delete u.fileLink,delete u.tags,u}catch(u){console.error("Error upload file:",u)}},a=async()=>{e(X(!0));let d=[];try{d=await Promise.all(c.map(async u=>await r(u==null?void 0:u.file)));try{const C=await on({botId:p,sitemapUrls:[],sourceUrls:[],fileIds:d});l([]),f([]),i(),Z.success(o("Đang tải dữ liệu vui lòng đợi")),e(Mt(!t))}catch(u){console.error("Error embedding bot:",u)}}catch(u){console.error("Error upload file:",u)}finally{e(X(!1))}};return s.jsx(s.Fragment,{children:s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(G,{titleTypographyProps:{variant:"h4"},title:"Training dữ liệu Bot"}),s.jsx(L,{}),s.jsx(K,{sx:{py:3},children:s.jsx(gn,{files:c,setFiles:l,setUploadFiles:f})}),s.jsx(L,{}),s.jsxs(bt,{sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:[s.jsx(fn,{}),c.length>0&&s.jsxs(A,{variant:"contained",color:"success",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},onClick:()=>a(),children:["Embed",n&&s.jsxs(b,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},color:"common.white",children:[" ",s.jsx(yt,{style:{height:"20px",width:"20px"},color:"inherit"})]})]})]})]})})},xn=({botId:i})=>{$(),B();const o=Ee(),c=I(n=>n.auth.admin),l=I(n=>n.common.refresh),[g,f]=E.useState(0),[h,p]=E.useState([]),e=E.useCallback(async(n,t)=>{if(i)try{const r=await It.getUserWithGranted({customerId:c.customerId,botId:i,pagination:{pageNumber:n.pageNumber,pageSize:n.pageSize}});o()&&(p(r.content),f(r.totalElements))}catch(r){console.error(r)}else p([])},[o,l,i]);return s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(G,{titleTypographyProps:{variant:"h4"},title:"Danh sách người dùng được truy cập Bot"}),s.jsx(L,{}),s.jsx(K,{children:s.jsx(_t,{totalCount:g,users:h,botId:i,fetchData:e})})]})},En=()=>{B(),$();const i=Ee(),{id:o}=V(),[c,l]=E.useState({}),[g,f]=E.useState([]),h=I(r=>r.auth.admin);I(r=>r.common.loading);const p=I(r=>r.common.refresh),e=je(),n=E.useCallback(async()=>{try{const r=await Rt.getBot({botId:o});i()&&l(r)}catch(r){console.error(r)}},[o,i]);E.useEffect(()=>{let r=null;return r=setInterval(()=>{n()},5e3),()=>clearInterval(r)},[c,p]);const t=async()=>{try{const r=await Pt({botId:o,customerId:h.customerId});f(r)}catch(r){console.error("Error fetching user files:",r)}};return E.useEffect(()=>{e(X(!0));try{n(),t()}catch(r){console.error("Error",r)}finally{e(X(!1))}},[o,p]),s.jsx(s.Fragment,{children:s.jsx(b,{px:{xs:2,sm:3},pt:{xs:2,sm:3},component:"main",flex:1,display:"flex",flexDirection:"column",children:s.jsxs(At,{disableGutters:!0,maxWidth:"xl",children:[s.jsx(b,{children:s.jsxs(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:[s.jsx(Ft,{data:c}),s.jsx(pn,{onEmbed:()=>t()})]})}),s.jsx(b,{pt:{xs:2,sm:3},children:s.jsx(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:s.jsx(rn,{tableData:g})})}),s.jsx(b,{pt:{xs:2,sm:3},children:s.jsx(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:s.jsx(xn,{botId:o})})})]})})})};export{En as default};
