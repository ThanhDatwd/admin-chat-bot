import{f as m,i as b,j as e,r as n,k as y,b9 as S,aN as C,T as a,S as R,bE as I,V as U,bG as z,A as k,o as w,B as p,b as P,bj as _}from"./index-vE0RA0FT.js";var i={},A=b;Object.defineProperty(i,"__esModule",{value:!0});var u=i.default=void 0,B=A(m()),L=e,E=(0,B.default)((0,L.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");u=i.default=E;const W=({onUpload:x})=>{const[r,l]=n.useState(""),[s,c]=n.useState(!1),h=y(o=>o.auth.admin),g=async o=>{try{const t=await _({file:o,userId:h.id,isPublic:!0});console.log("File uploaded successfully:",t),l(URL.createObjectURL(o)),x(t==null?void 0:t.fileLink)}catch(t){console.error("Error uploading file:",t)}finally{c(!1)}},j=n.useCallback(async o=>{c(!0);const t=o[0];t&&g(t)},[]),{getRootProps:d,getInputProps:v}=S({onDrop:j,accept:{"image/*":[".jpeg",".jpg",".png"]},maxFiles:1}),f=()=>{l(""),r&&URL.revokeObjectURL(r)};return e.jsxs(C,{fullWidth:!0,variant:"outlined",children:[e.jsx(a,{variant:"h6",gutterBottom:!0,component:"label",fontWeight:500,children:"Icon"}),e.jsxs(R,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(I,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:r&&e.jsx(U,{variant:"contained",color:"secondary",startIcon:e.jsx(z,{fontSize:"inherit"}),sx:{borderRadius:"50%",boxShadow:o=>o.shadows[18]},size:"small",onClick:f}),children:e.jsx(k,{...d(),src:r,state:"primary",isSoft:!0,sx:{width:74,height:74,border:"2px solid transparent","&:hover":{borderStyle:"dashed",borderColor:"currentcolor",cursor:"pointer"}},alt:"Avatar Preview",children:!r&&s?e.jsx(w,{size:34}):e.jsx(u,{fontSize:"small"})})}),e.jsxs(p,{children:[e.jsx("input",{...v()}),e.jsx(P,{variant:"outlined",color:"secondary",size:"small",component:"span",...d(),disabled:s,sx:{px:s&&0},children:s?"Please wait...":"Upload"}),e.jsxs(a,{variant:"subtitle2",color:"text.secondary",sx:{mt:.5},children:["Accepted files:"," ",e.jsx(a,{color:"text.primary",fontWeight:500,component:"span",children:".jpeg"}),","," ",e.jsx(a,{color:"text.primary",fontWeight:500,component:"span",children:".jpg"}),","," ",e.jsx(a,{color:"text.primary",fontWeight:500,component:"span",children:".png"}),"."]})]}),e.jsx(p,{sx:{display:"inline-block",position:"relative"}})]})]})};export{W as U};
