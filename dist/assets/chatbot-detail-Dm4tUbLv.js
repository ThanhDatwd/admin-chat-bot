import{aV as fe,aW as Oe,aX as ze,aY as Fe,aZ as Q,a_ as Ue,a$ as le,b0 as $e,b1 as He,f as F,i as U,j as r,u as k,a as $,k as T,c as H,b2 as Y,R as V,W,D as L,B as M,aa as me,ab as Qe,T as j,r as E,e as G,a4 as We,a5 as Xe,a6 as Ye,a7 as ce,a8 as _,a9 as Ge,b3 as ge,af as Ke,E as de,aF as I,aR as Ve,b4 as qe,ag as Ze,L as pe,S as P,b as A,b5 as Je,b6 as et,K as tt,b7 as R,aK as nt,aL as rt,aO as st,aP as ot,b8 as q,b9 as at,ba as it,bb as lt,A as ct,bc as dt,bd as ut,be as ht,aG as ft,aH as mt,bf as gt,aI as pt,bg as xt,bh as vt,bi as Ct,bj as bt,bk as Et,ak as xe,bl as jt,bm as Mt,aS as yt,C as wt,bn as Rt}from"./index-8egQHEDr.js";import{d as _t}from"./LaunchTwoTone-7HaCaCgK.js";function It(i){return fe({},i)}var ue=1440,At=2520,K=43200,St=86400;function Pt(i,o,c){var l,m;Oe(2,arguments);var f=He(),u=(l=(m=c==null?void 0:c.locale)!==null&&m!==void 0?m:f.locale)!==null&&l!==void 0?l:ze;if(!u.formatDistance)throw new RangeError("locale must contain formatDistance property");var p=Fe(i,o);if(isNaN(p))throw new RangeError("Invalid time value");var e=fe(It(c),{addSuffix:!!(c!=null&&c.addSuffix),comparison:p}),t,n;p>0?(t=Q(o),n=Q(i)):(t=Q(i),n=Q(o));var s=Ue(n,t),a=(le(n)-le(t))/1e3,d=Math.round((s-a)/60),h;if(d<2)return c!=null&&c.includeSeconds?s<5?u.formatDistance("lessThanXSeconds",5,e):s<10?u.formatDistance("lessThanXSeconds",10,e):s<20?u.formatDistance("lessThanXSeconds",20,e):s<40?u.formatDistance("halfAMinute",0,e):s<60?u.formatDistance("lessThanXMinutes",1,e):u.formatDistance("xMinutes",1,e):d===0?u.formatDistance("lessThanXMinutes",1,e):u.formatDistance("xMinutes",d,e);if(d<45)return u.formatDistance("xMinutes",d,e);if(d<90)return u.formatDistance("aboutXHours",1,e);if(d<ue){var C=Math.round(d/60);return u.formatDistance("aboutXHours",C,e)}else{if(d<At)return u.formatDistance("xDays",1,e);if(d<K){var x=Math.round(d/ue);return u.formatDistance("xDays",x,e)}else if(d<St)return h=Math.round(d/K),u.formatDistance("aboutXMonths",h,e)}if(h=$e(n,t),h<12){var w=Math.round(d/K);return u.formatDistance("xMonths",w,e)}else{var v=h%12,g=Math.floor(h/12);return v<3?u.formatDistance("aboutXYears",g,e):v<9?u.formatDistance("overXYears",g,e):u.formatDistance("almostXYears",g+1,e)}}var Z={},Nt=U;Object.defineProperty(Z,"__esModule",{value:!0});var ve=Z.default=void 0,Dt=Nt(F()),Tt=r,Lt=(0,Dt.default)((0,Tt.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined");ve=Z.default=Lt;const kt=({data:i})=>{var l;k();const{t:o}=$(),{knowledges:c}=T(m=>m.knowledge);return r.jsxs(H,{sx:{width:"650px"},children:[r.jsx(Y,{titleTypographyProps:{variant:"h4"},title:"Thông tin Bot",action:r.jsx(V,{arrow:!0,placement:"top",title:o("Sửa thông tin bot"),children:r.jsx(W,{color:"primary",children:r.jsx(ve,{})})})}),r.jsx(L,{}),r.jsxs(M,{textAlign:"center",position:"relative",p:{xs:2,sm:3,md:6},children:[r.jsx(me,{sx:{mx:"auto",mb:1.5,width:94,height:94},src:i==null?void 0:i.icon}),r.jsx(Qe,{color:"success",label:i==null?void 0:i.botStatus}),r.jsx(j,{sx:{pt:2},variant:"h3",children:i==null?void 0:i.botName}),r.jsx(j,{variant:"subtitle1",color:"text.secondary",children:(l=c.find(m=>m.knowId===(i==null?void 0:i.knowId)))==null?void 0:l.knowName}),r.jsx(j,{sx:{pt:1},style:{fontSize:16},color:"text.secondary",children:i==null?void 0:i.botDescription})]})]})};var J={},Bt=U;Object.defineProperty(J,"__esModule",{value:!0});var Ce=J.default=void 0,Ot=Bt(F()),zt=r,Ft=(0,Ot.default)((0,zt.jsx)("path",{d:"M14.71 6.71a.9959.9959 0 0 0-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L10.83 12l3.88-3.88c.39-.39.38-1.03 0-1.41z"}),"ChevronLeftRounded");Ce=J.default=Ft;var ee={},Ut=U;Object.defineProperty(ee,"__esModule",{value:!0});var be=ee.default=void 0,$t=Ut(F()),Ht=r,Qt=(0,$t.default)((0,Ht.jsx)("path",{d:"M9.29 6.71c-.39.39-.39 1.02 0 1.41L13.17 12l-3.88 3.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z"}),"ChevronRightRounded");be=ee.default=Qt;var te={},Wt=U;Object.defineProperty(te,"__esModule",{value:!0});var Ee=te.default=void 0,Xt=Wt(F()),Yt=r,Gt=(0,Xt.default)((0,Yt.jsx)("path",{d:"M11.29 8.71 6.7 13.3c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.38-.39-1.02-.39-1.41 0z"}),"ExpandLessRounded");Ee=te.default=Gt;var ne={},Kt=U;Object.defineProperty(ne,"__esModule",{value:!0});var je=ne.default=void 0,Vt=Kt(F()),qt=r,Zt=(0,Vt.default)((0,qt.jsx)("path",{d:"M15.88 9.29 12 13.17 8.12 9.29a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z"}),"ExpandMoreRounded");je=ne.default=Zt;const Jt=({tableData:i})=>{const{t:o}=$(),c=k(),[l,m]=E.useState({key:"dateCreated",direction:"ascending"}),[f,u]=E.useState(0),[p,e]=E.useState(3),t=(v,g)=>{u(g)},n=v=>{e(parseInt(v.target.value,10)),u(0)},s=(v,g)=>[...v].sort((b,y)=>b[g.key]<y[g.key]?g.direction==="ascending"?-1:1:b[g.key]>y[g.key]?g.direction==="ascending"?1:-1:0),a=v=>{let g="ascending";l.key===v&&l.direction==="ascending"&&(g="descending"),m({key:v,direction:g})},d=v=>l.key!==v?null:l.direction==="ascending"?r.jsx(je,{sx:{color:"text.secondary"},fontSize:"small"}):r.jsx(Ee,{sx:{color:"text.secondary"},fontSize:"small"}),C=s(i,l).slice(f*p,f*p+p),x=async({fileKey:v,fileName:g})=>{try{await Je({fileKey:v,fileName:g})}catch(b){console.error("Error fetching user files:",b)}},w=()=>{};return r.jsxs(H,{sx:{width:"100%"},children:[r.jsx(Y,{titleTypographyProps:{variant:"h4"},title:"Lịch sử training dữ liệu"}),r.jsx(L,{}),r.jsxs(G,{children:[r.jsx(We,{children:r.jsxs(Xe,{children:[r.jsx(Ye,{children:r.jsxs(ce,{children:[r.jsx(_,{onClick:()=>a("filename"),children:r.jsxs(M,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Tên file")," ",d("filename")]})}),r.jsx(_,{onClick:()=>a("owner"),children:r.jsxs(M,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Người training")," ",d("owner")]})}),r.jsx(_,{onClick:()=>a("dateCreated"),children:r.jsxs(M,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Ngày tạo")," ",d("dateCreated")]})}),r.jsx(_,{align:"right",children:o("Actions")})]})}),r.jsx(Ge,{children:C.map(v=>r.jsxs(ce,{hover:!0,children:[r.jsx(_,{children:r.jsxs(M,{display:"flex",alignItems:"center",children:[ge(v.fileName),r.jsx(j,{sx:{pl:1},variant:"h6",children:v.fileName})]})}),r.jsx(_,{children:r.jsxs(M,{display:"flex",alignItems:"center",children:[v.avatarUrl?r.jsx(me,{src:v.avatarUrl,sx:{mr:1,height:28,width:28}}):null,r.jsx(Ke,{href:"",onClick:g=>g.preventDefault(),underline:"hover",variant:"h6",noWrap:!0,fontWeight:500,children:v.userId})]})}),r.jsx(_,{children:r.jsx(j,{variant:"h6",fontWeight:400,noWrap:!0,children:Pt(new Date(v.createDate),new Date,{addSuffix:!0})})}),r.jsxs(_,{sx:{whiteSpace:"nowrap"},align:"right",children:[r.jsx(V,{title:o("Xem"),arrow:!0,children:r.jsx(de,{sx:{"&:hover":{background:I(c.palette.primary.main,.08)},color:c.palette.primary.main},color:"inherit",size:"small",onClick:()=>x({fileKey:v==null?void 0:v.objectId,fileName:v==null?void 0:v.fileName}),children:r.jsx(_t,{fontSize:"small"})})}),r.jsx(V,{title:o("Xóa"),arrow:!0,children:r.jsx(de,{sx:{"&:hover":{background:I(c.palette.error.main,.08)},color:c.palette.error.main},color:"inherit",size:"small",onClick:()=>w(),children:r.jsx(Ve,{fontSize:"small"})})})]})]},v.id))})]})}),r.jsx(qe,{sx:{p:2,".MuiTablePagination-toolbar":{justifyContent:"space-between"},".MuiTablePagination-spacer":{display:"none"}},children:r.jsx(Ze,{component:"div",count:i.length,page:f,onPageChange:t,rowsPerPage:p,onRowsPerPageChange:n,rowsPerPageOptions:[3],ActionsComponent:en})})]})]})},en=({count:i,page:o,onPageChange:c})=>{const l=u=>{c(u,o-1)},m=u=>{c(u,o+1)},f=pe(u=>u.breakpoints.up("sm"));return r.jsx(P,{direction:"row",spacing:1,children:f?r.jsxs(r.Fragment,{children:[r.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:l,disabled:o===0,children:"Trang trước"}),r.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:m,disabled:o>=Math.ceil(i/3)-1,children:"Trang sau"})]}):r.jsxs(r.Fragment,{children:[r.jsx(W,{variant:"outlined",color:"secondary",size:"small",onClick:l,disabled:o===0,startIcon:r.jsx(Ce,{})}),r.jsx(W,{variant:"outlined",color:"secondary",size:"small",onClick:m,disabled:o>=Math.ceil(i/3)-1,startIcon:r.jsx(be,{})})]})})},tn=async i=>{try{return await et("http://52.221.236.203:8085/bot-edge/api/v1/bot/embed/files",i)}catch(o){throw console.error("Error embed files:",o),o}};tt(A)(({theme:i})=>({background:I(i.palette.common.white,.08),color:I(i.palette.common.white,.9),borderColor:I(i.palette.common.white,.12),"&:hover":{background:I(i.palette.common.white,.1),color:i.palette.common.white},"&.MuiButton-outlined":{borderColor:I(i.palette.common.white,.12),"&:hover":{borderColor:I(i.palette.common.white,.16)}}}));var nn=Object.defineProperty,X=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,he=(i,o,c)=>o in i?nn(i,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[o]=c,z=(i,o)=>{for(var c in o||(o={}))Me.call(o,c)&&he(i,c,o[c]);if(X)for(var c of X(o))ye.call(o,c)&&he(i,c,o[c]);return i},re=(i,o)=>{var c={};for(var l in i)Me.call(i,l)&&o.indexOf(l)<0&&(c[l]=i[l]);if(i!=null&&X)for(var l of X(i))o.indexOf(l)<0&&ye.call(i,l)&&(c[l]=i[l]);return c};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var N;(i=>{const o=class{constructor(e,t,n,s){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<o.MIN_VERSION||e>o.MAX_VERSION)throw new RangeError("Version value out of range");if(s<-1||s>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let a=[];for(let h=0;h<this.size;h++)a.push(!1);for(let h=0;h<this.size;h++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const d=this.addEccAndInterleave(n);if(this.drawCodewords(d),s==-1){let h=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const x=this.getPenaltyScore();x<h&&(s=C,h=x),this.applyMask(C)}}f(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}static encodeText(e,t){const n=i.QrSegment.makeSegments(e);return o.encodeSegments(n,t)}static encodeBinary(e,t){const n=i.QrSegment.makeBytes(e);return o.encodeSegments([n],t)}static encodeSegments(e,t,n=1,s=40,a=-1,d=!0){if(!(o.MIN_VERSION<=n&&n<=s&&s<=o.MAX_VERSION)||a<-1||a>7)throw new RangeError("Invalid value");let h,C;for(h=n;;h++){const g=o.getNumDataCodewords(h,t)*8,b=p.getTotalBits(e,h);if(b<=g){C=b;break}if(h>=s)throw new RangeError("Data too long")}for(const g of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])d&&C<=o.getNumDataCodewords(h,g)*8&&(t=g);let x=[];for(const g of e){l(g.mode.modeBits,4,x),l(g.numChars,g.mode.numCharCountBits(h),x);for(const b of g.getData())x.push(b)}f(x.length==C);const w=o.getNumDataCodewords(h,t)*8;f(x.length<=w),l(0,Math.min(4,w-x.length),x),l(0,(8-x.length%8)%8,x),f(x.length%8==0);for(let g=236;x.length<w;g^=253)l(g,8,x);let v=[];for(;v.length*8<x.length;)v.push(0);return x.forEach((g,b)=>v[b>>>3]|=g<<7-(b&7)),new o(h,t,v,a)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let s=0;s<t;s++)n==0&&s==0||n==0&&s==t-1||n==t-1&&s==0||this.drawAlignmentPattern(e[n],e[s]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let a=0;a<10;a++)n=n<<1^(n>>>9)*1335;const s=(t<<10|n)^21522;f(s>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,m(s,a));this.setFunctionModule(8,7,m(s,6)),this.setFunctionModule(8,8,m(s,7)),this.setFunctionModule(7,8,m(s,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,m(s,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,m(s,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,m(s,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^(e>>>11)*7973;const t=this.version<<12|e;f(t>>>18==0);for(let n=0;n<18;n++){const s=m(t,n),a=this.size-11+n%3,d=Math.floor(n/3);this.setFunctionModule(a,d,s),this.setFunctionModule(d,a,s)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let s=-4;s<=4;s++){const a=Math.max(Math.abs(s),Math.abs(n)),d=e+s,h=t+n;0<=d&&d<this.size&&0<=h&&h<this.size&&this.setFunctionModule(d,h,a!=2&&a!=4)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let s=-2;s<=2;s++)this.setFunctionModule(e+s,t+n,Math.max(Math.abs(s),Math.abs(n))!=1)}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const t=this.version,n=this.errorCorrectionLevel;if(e.length!=o.getNumDataCodewords(t,n))throw new RangeError("Invalid argument");const s=o.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],a=o.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],d=Math.floor(o.getNumRawDataModules(t)/8),h=s-d%s,C=Math.floor(d/s);let x=[];const w=o.reedSolomonComputeDivisor(a);for(let g=0,b=0;g<s;g++){let y=e.slice(b,b+C-a+(g<h?0:1));b+=y.length;const B=o.reedSolomonComputeRemainder(y,w);g<h&&y.push(0),x.push(y.concat(B))}let v=[];for(let g=0;g<x[0].length;g++)x.forEach((b,y)=>{(g!=C-a||y>=h)&&v.push(b[g])});return f(v.length==d),v}drawCodewords(e){if(e.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(let s=0;s<this.size;s++)for(let a=0;a<2;a++){const d=n-a,C=(n+1&2)==0?this.size-1-s:s;!this.isFunction[C][d]&&t<e.length*8&&(this.modules[C][d]=m(e[t>>>3],7-(t&7)),t++)}}f(t==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let s;switch(e){case 0:s=(n+t)%2==0;break;case 1:s=t%2==0;break;case 2:s=n%3==0;break;case 3:s=(n+t)%3==0;break;case 4:s=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:s=n*t%2+n*t%3==0;break;case 6:s=(n*t%2+n*t%3)%2==0;break;case 7:s=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&s&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let a=0;a<this.size;a++){let d=!1,h=0,C=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[a][x]==d?(h++,h==5?e+=o.PENALTY_N1:h>5&&e++):(this.finderPenaltyAddHistory(h,C),d||(e+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),d=this.modules[a][x],h=1);e+=this.finderPenaltyTerminateAndCount(d,h,C)*o.PENALTY_N3}for(let a=0;a<this.size;a++){let d=!1,h=0,C=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[x][a]==d?(h++,h==5?e+=o.PENALTY_N1:h>5&&e++):(this.finderPenaltyAddHistory(h,C),d||(e+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),d=this.modules[x][a],h=1);e+=this.finderPenaltyTerminateAndCount(d,h,C)*o.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let d=0;d<this.size-1;d++){const h=this.modules[a][d];h==this.modules[a][d+1]&&h==this.modules[a+1][d]&&h==this.modules[a+1][d+1]&&(e+=o.PENALTY_N2)}let t=0;for(const a of this.modules)t=a.reduce((d,h)=>d+(h?1:0),t);const n=this.size*this.size,s=Math.ceil(Math.abs(t*20-n*10)/n)-1;return f(0<=s&&s<=9),e+=s*o.PENALTY_N4,f(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let n=[6];for(let s=this.size-7;n.length<e;s-=t)n.splice(1,0,s);return n}}static getNumRawDataModules(e){if(e<o.MIN_VERSION||e>o.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return f(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(o.getNumRawDataModules(e)/8)-o.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*o.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let s=0;s<e-1;s++)t.push(0);t.push(1);let n=1;for(let s=0;s<e;s++){for(let a=0;a<t.length;a++)t[a]=o.reedSolomonMultiply(t[a],n),a+1<t.length&&(t[a]^=t[a+1]);n=o.reedSolomonMultiply(n,2)}return t}static reedSolomonComputeRemainder(e,t){let n=t.map(s=>0);for(const s of e){const a=s^n.shift();n.push(0),t.forEach((d,h)=>n[h]^=o.reedSolomonMultiply(d,a))}return n}static reedSolomonMultiply(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let n=0;for(let s=7;s>=0;s--)n=n<<1^(n>>>7)*285,n^=(t>>>s&1)*e;return f(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];f(t<=this.size*3);const n=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(n&&e[0]>=t*4&&e[6]>=t?1:0)+(n&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};let c=o;c.MIN_VERSION=1,c.MAX_VERSION=40,c.PENALTY_N1=3,c.PENALTY_N2=3,c.PENALTY_N3=40,c.PENALTY_N4=10,c.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],c.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=c;function l(e,t,n){if(t<0||t>31||e>>>t)throw new RangeError("Value out of range");for(let s=t-1;s>=0;s--)n.push(e>>>s&1)}function m(e,t){return(e>>>t&1)!=0}function f(e){if(!e)throw new Error("Assertion error")}const u=class{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(e){let t=[];for(const n of e)l(n,8,t);return new u(u.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!u.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<e.length;){const s=Math.min(e.length-n,3);l(parseInt(e.substr(n,s),10),s*3+1,t),n+=s}return new u(u.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!u.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],n;for(n=0;n+2<=e.length;n+=2){let s=u.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n))*45;s+=u.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n+1)),l(s,11,t)}return n<e.length&&l(u.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n)),6,t),new u(u.Mode.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:u.isNumeric(e)?[u.makeNumeric(e)]:u.isAlphanumeric(e)?[u.makeAlphanumeric(e)]:[u.makeBytes(u.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)l(e,8,t);else if(e<16384)l(2,2,t),l(e,14,t);else if(e<1e6)l(6,3,t),l(e,21,t);else throw new RangeError("ECI assignment value out of range");return new u(u.Mode.ECI,0,t)}static isNumeric(e){return u.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return u.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const s of e){const a=s.mode.numCharCountBits(t);if(s.numChars>=1<<a)return 1/0;n+=4+a+s.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)e.charAt(n)!="%"?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t}};let p=u;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=p})(N||(N={}));(i=>{(o=>{const c=class{constructor(m,f){this.ordinal=m,this.formatBits=f}};let l=c;l.LOW=new c(0,1),l.MEDIUM=new c(1,0),l.QUARTILE=new c(2,3),l.HIGH=new c(3,2),o.Ecc=l})(i.QrCode||(i.QrCode={}))})(N||(N={}));(i=>{(o=>{const c=class{constructor(m,f){this.modeBits=m,this.numBitsCharCount=f}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};let l=c;l.NUMERIC=new c(1,[10,12,14]),l.ALPHANUMERIC=new c(2,[9,11,13]),l.BYTE=new c(4,[8,16,16]),l.KANJI=new c(8,[8,10,12]),l.ECI=new c(7,[0,0,0]),o.Mode=l})(i.QrSegment||(i.QrSegment={}))})(N||(N={}));var D=N;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var we={L:D.QrCode.Ecc.LOW,M:D.QrCode.Ecc.MEDIUM,Q:D.QrCode.Ecc.QUARTILE,H:D.QrCode.Ecc.HIGH},Re=128,_e="L",Ie="#FFFFFF",Ae="#000000",Se=!1,se=4,rn=.1;function Pe(i,o=0){const c=[];return i.forEach(function(l,m){let f=null;l.forEach(function(u,p){if(!u&&f!==null){c.push(`M${f+o} ${m+o}h${p-f}v1H${f+o}z`),f=null;return}if(p===l.length-1){if(!u)return;f===null?c.push(`M${p+o},${m+o} h1v1H${p+o}z`):c.push(`M${f+o},${m+o} h${p+1-f}v1H${f+o}z`);return}u&&f===null&&(f=p)})}),c.join("")}function Ne(i,o){return i.slice().map((c,l)=>l<o.y||l>=o.y+o.h?c:c.map((m,f)=>f<o.x||f>=o.x+o.w?m:!1))}function De(i,o,c,l){if(l==null)return null;const m=c?se:0,f=i.length+m*2,u=Math.floor(o*rn),p=f/o,e=(l.width||u)*p,t=(l.height||u)*p,n=l.x==null?i.length/2-e/2:l.x*p,s=l.y==null?i.length/2-t/2:l.y*p;let a=null;if(l.excavate){let d=Math.floor(n),h=Math.floor(s),C=Math.ceil(e+n-d),x=Math.ceil(t+s-h);a={x:d,y:h,w:C,h:x}}return{x:n,y:s,h:t,w:e,excavation:a}}var sn=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function on(i){const o=i,{value:c,size:l=Re,level:m=_e,bgColor:f=Ie,fgColor:u=Ae,includeMargin:p=Se,style:e,imageSettings:t}=o,n=re(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),s=t==null?void 0:t.src,a=E.useRef(null),d=E.useRef(null),[h,C]=E.useState(!1);E.useEffect(()=>{if(a.current!=null){const v=a.current,g=v.getContext("2d");if(!g)return;let b=D.QrCode.encodeText(c,we[m]).getModules();const y=p?se:0,B=b.length+y*2,S=De(b,l,p,t),O=d.current,oe=S!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;oe&&S.excavation!=null&&(b=Ne(b,S.excavation));const ae=window.devicePixelRatio||1;v.height=v.width=l*ae;const ie=l/B*ae;g.scale(ie,ie),g.fillStyle=f,g.fillRect(0,0,B,B),g.fillStyle=u,sn?g.fill(new Path2D(Pe(b,y))):b.forEach(function(Te,Le){Te.forEach(function(ke,Be){ke&&g.fillRect(Be+y,Le+y,1,1)})}),oe&&g.drawImage(O,S.x+y,S.y+y,S.w,S.h)}}),E.useEffect(()=>{C(!1)},[s]);const x=z({height:l,width:l},e);let w=null;return s!=null&&(w=R.createElement("img",{src:s,key:s,style:{display:"none"},onLoad:()=>{C(!0)},ref:d})),R.createElement(R.Fragment,null,R.createElement("canvas",z({style:x,height:l,width:l,ref:a},n)),w)}function an(i){const o=i,{value:c,size:l=Re,level:m=_e,bgColor:f=Ie,fgColor:u=Ae,includeMargin:p=Se,imageSettings:e}=o,t=re(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let n=D.QrCode.encodeText(c,we[m]).getModules();const s=p?se:0,a=n.length+s*2,d=De(n,l,p,e);let h=null;e!=null&&d!=null&&(d.excavation!=null&&(n=Ne(n,d.excavation)),h=R.createElement("image",{xlinkHref:e.src,height:d.h,width:d.w,x:d.x+s,y:d.y+s,preserveAspectRatio:"none"}));const C=Pe(n,s);return R.createElement("svg",z({height:l,width:l,viewBox:`0 0 ${a} ${a}`},t),R.createElement("path",{fill:f,d:`M0,0 h${a}v${a}H0z`,shapeRendering:"crispEdges"}),R.createElement("path",{fill:u,d:C,shapeRendering:"crispEdges"}),h)}var ln=i=>{const o=i,{renderAs:c}=o,l=re(o,["renderAs"]);return c==="svg"?R.createElement(an,z({},l)):R.createElement(on,z({},l))};const cn=()=>{const i=k(),o=pe(i.breakpoints.down("sm")),[c,l]=E.useState(!1),m=()=>{l(!0)},f=()=>{l(!1)},p={bankName:"Ngân hàng X",accountNumber:"123456789",paymentAmount:"500,000 VNĐ",invoiceNumber:"123456"};return r.jsxs(r.Fragment,{children:[r.jsx(A,{variant:"contained",color:"success",onClick:()=>m(),children:"Payment"}),r.jsxs(nt,{fullScreen:o,open:c,onClose:f,"aria-labelledby":"basic-dialog-title",maxWidth:"xs",fullWidth:!0,children:[r.jsx(rt,{id:"basic-dialog-title",children:"Thanh toán"}),r.jsxs(st,{children:[r.jsx(j,{variant:"h6",children:"Thông tin phí"}),r.jsx(j,{children:"Số file / dung lượng nạp: 10 files / 500MB"}),r.jsx(j,{children:"Phí chi trả: 500,000 VNĐ"}),r.jsx(j,{variant:"h6",style:{marginTop:"20px"},children:"Mã QR"}),r.jsx(M,{display:"flex",justifyContent:"center",style:{margin:"20px"},children:r.jsx(ln,{value:`bank:${p.bankName};account:${p.accountNumber};amount:${p.paymentAmount};invoice:${p.invoiceNumber}`,size:300})}),r.jsxs(j,{children:["- Phí cần thanh toán: ",p.paymentAmount]}),r.jsxs(j,{children:["- Nội dung chuyển khoản: Số hóa đơn ",p.invoiceNumber]}),r.jsx(j,{variant:"body2",children:"Chú ý: Nội dung chuyển khoản bắt buộc chứa Số hóa đơn"})]}),r.jsxs(ot,{children:[r.jsx(A,{onClick:f,color:"primary",children:"Quay lại"}),r.jsx(A,{onClick:f,color:"primary",children:"Tiếp tục"})]})]})]})},dn=(i,o=2)=>{if(i===0)return"0 Bytes";const c=1024,l=o<0?0:o,m=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],f=Math.floor(Math.log(i)/Math.log(c));return parseFloat((i/Math.pow(c,f)).toFixed(l))+" "+m[f]},un=({files:i,setFiles:o})=>{const[c,l]=E.useState({});T(n=>n.auth.admin),q();const m=E.useCallback(n=>{n.forEach(s=>{l(a=>({...a,[s.name]:{progress:0}}))}),o(s=>[...s,...n.map(a=>({file:a,progress:0}))]),n.forEach(s=>{(d=>{const h=setInterval(()=>{l(C=>{if(!C[d.name])return clearInterval(h),C;const x=C[d.name].progress,w=Math.min(x+10,100);return w===100&&clearInterval(h),{...C,[d.name]:{progress:w}}})},200)})(s)})},[]),{getRootProps:f,isDragActive:u,isDragAccept:p,isDragReject:e}=at({onDrop:m,accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxFiles:10}),t=n=>{o(s=>s.filter(({file:a})=>a.name!==n)),l(s=>{const a={...s};return delete a[n],a}),c[n]&&URL.revokeObjectURL(c[n].url)};return r.jsxs(r.Fragment,{children:[r.jsx(it,{variant:"outlined",elevation:0,sx:{borderWidth:1},children:r.jsx(lt,{...f(),children:r.jsx(G,{children:r.jsxs(P,{spacing:1,justifyContent:"center",direction:"column",alignItems:"center",children:[r.jsxs(ct,{state:"secondary",isSoft:!0,variant:"rounded",sx:{borderWidth:1,borderStyle:"solid",borderColor:n=>n.palette.mode==="dark"?"neutral.800":"neutral.400",backgroundColor:"background.paper"},children:[e&&r.jsx(dt,{fontSize:"small",sx:{color:"error.main"}}),p&&r.jsx(ut,{fontSize:"small",sx:{color:"success.main"}}),!u&&r.jsx(ht,{fontSize:"small",sx:{color:"text.primary"}})]}),r.jsx(M,{children:r.jsxs(j,{textAlign:"center",variant:"h6",fontWeight:400,color:p?"success.main":e?"error.main":"text.secondary",children:[r.jsx(j,{variant:"h6",fontWeight:600,component:"span",color:p?"success.main":e?"error.main":"primary.main",children:"Nhấp để tải lên"})," ","hoặc kéo và thả tài liệu vào đây. Tối đa 10 tệp"]})})]})})})}),i&&i.length>0?r.jsx(ft,{component:"div",disablePadding:!0,children:r.jsx(P,{spacing:2,mt:2,children:i.map(({file:n})=>{var s,a;return r.jsx(H,{variant:"outlined",elevation:0,sx:{"&:hover":{borderColor:d=>d.palette.mode==="dark"?"neutral.800":"neutral.500"}},children:r.jsxs(mt,{component:"div",alignItems:"flex-start",children:[r.jsx(gt,{sx:{minWidth:38,color:"neutral.700"},children:ge(n.name)}),r.jsx(pt,{primary:r.jsxs(M,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",children:[r.jsxs(M,{overflow:"hidden",children:[r.jsx(j,{noWrap:!0,variant:"subtitle1",fontWeight:500,color:"text.primary",children:n.name}),r.jsx(j,{variant:"subtitle2",color:"text.secondary",children:dn(n.size)})]}),r.jsx(W,{"aria-label":"delete",onClick:()=>t(n.name),size:"small",color:"error",children:r.jsx(xt,{fontSize:"small"})})]}),disableTypography:!0,secondary:r.jsxs(M,{display:"flex",alignItems:"center",children:[r.jsx(M,{flex:1,children:r.jsx(vt,{variant:"determinate",value:((s=c[n.name])==null?void 0:s.progress)||0})}),r.jsxs(j,{variant:"subtitle2",sx:{pl:.5},children:[((a=c[n.name])==null?void 0:a.progress)||0,"%"]})]})})]})},n.name)})})}):r.jsxs(P,{spacing:.5,justifyContent:"center",direction:"column",alignItems:"center",pt:3,pb:2,children:[r.jsxs(M,{textAlign:"center",children:[r.jsx(j,{variant:"h5",color:"text.primary",children:"Không có tệp nào được thêm vào"}),r.jsx(j,{color:"text.secondary",fontWeight:400,children:"Vui lòng tải lên các tài liệu cần thiết"})]}),r.jsx(M,{width:"100%",children:r.jsx(L,{flexItem:!0,sx:{my:1,mx:"auto",width:"55%"}})}),r.jsx(A,{startIcon:r.jsx(Ct,{}),variant:"outlined",color:"secondary",size:"small",...f(),children:"Thêm tệp"})]})]})},hn=({onEmbed:i})=>{k(),$();const[o,c]=E.useState([]),[l,m]=E.useState([]);E.useState(!1);const f=T(t=>t.auth.admin),{id:u}=q(),p=async t=>{try{const n=await Et({file:t,botId:u,userId:f.id,isPublic:!1});return delete n.fileLink,n}catch(n){console.error("Error upload file:",n)}},e=async()=>{try{o.forEach(t=>{const n=p(t==null?void 0:t.file);m(s=>[...s,n])});try{const t={botId:u,sitemapUrls:[],sourceUrls:[],fileIds:l};console.log(t);const n=await tn(t);console.log("Embed bot response:",n),c([]),m([]),i()}catch(t){console.error("Error embedding bot:",t)}}catch(t){console.error("Error upload file:",t)}};return r.jsx(r.Fragment,{children:r.jsxs(H,{sx:{width:"100%"},children:[r.jsx(Y,{titleTypographyProps:{variant:"h4"},title:"Training dữ liệu Bot"}),r.jsx(L,{}),r.jsx(G,{sx:{py:3},children:r.jsx(un,{files:o,setFiles:c,setUploadFiles:m})}),r.jsx(L,{}),r.jsxs(bt,{sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:[r.jsx(cn,{}),o.length>0&&r.jsx(A,{variant:"contained",color:"success",onClick:()=>e(),children:"Embed"})]})]})})},fn=({botId:i})=>{$(),k();const o=xe(),c=T(t=>t.auth.admin),l=T(t=>t.common.refresh),[m,f]=E.useState(0),[u,p]=E.useState([]),e=E.useCallback(async(t,n)=>{if(i)try{const s=await jt.getUserWithGranted({customerId:c.customerId,botId:i,pagination:{pageNumber:t.pageNumber,pageSize:t.pageSize}});o()&&(p(s.content),f(s.totalElements))}catch(s){console.error(s)}else p([])},[o,l,i]);return r.jsxs(H,{sx:{width:"100%"},children:[r.jsx(Y,{titleTypographyProps:{variant:"h4"},title:"Danh sách người dùng được truy cập Bot"}),r.jsx(L,{}),r.jsx(G,{children:r.jsx(Mt,{totalCount:m,users:u,botId:i,fetchData:e})})]})},pn=()=>{k(),$();const i=xe(),{id:o}=q(),[c,l]=E.useState({}),[m,f]=E.useState([]),u=T(t=>t.auth.admin),p=E.useCallback(async()=>{try{const t=await yt.getBot({botId:o});i()&&l(t)}catch(t){console.error(t)}},[i]);E.useEffect(()=>{p()},[p]);const e=async()=>{try{const t=await Rt({botId:o,userId:u.id});f(t)}catch(t){console.error("Error fetching user files:",t)}};return E.useEffect(()=>{e()},[o]),r.jsx(r.Fragment,{children:r.jsx(M,{px:{xs:2,sm:3},pt:{xs:2,sm:3},component:"main",flex:1,display:"flex",flexDirection:"column",children:r.jsxs(wt,{disableGutters:!0,maxWidth:"xl",children:[r.jsx(M,{children:r.jsxs(P,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:[r.jsx(kt,{data:c}),r.jsx(hn,{onEmbed:()=>e()})]})}),r.jsx(M,{pt:{xs:2,sm:3},children:r.jsx(P,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:r.jsx(Jt,{tableData:m})})}),r.jsx(M,{pt:{xs:2,sm:3},children:r.jsx(P,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:r.jsx(fn,{botId:o})})})]})})})};export{pn as default};
