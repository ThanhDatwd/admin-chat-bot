import{bG as m,j as e,f as b,i as y,r as n,k as S,b9 as C,aM as R,T as r,S as I,bF as z,W as L,A as U,o as k,B as p,b as w,bk as P}from"./index-8egQHEDr.js";const _=m(e.jsx("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded");var i={},A=y;Object.defineProperty(i,"__esModule",{value:!0});var u=i.default=void 0,B=A(b()),F=e,W=(0,B.default)((0,F.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");u=i.default=W;const D=({onUpload:x})=>{const[a,l]=n.useState(""),[s,c]=n.useState(!1),h=S(o=>o.auth.admin),g=async o=>{try{const t=await P({file:o,userId:h.id,isPublic:!0});console.log("File uploaded successfully:",t),l(URL.createObjectURL(o)),x(t==null?void 0:t.fileLink)}catch(t){console.error("Error uploading file:",t)}finally{c(!1)}},j=n.useCallback(async o=>{c(!0);const t=o[0];t&&g(t)},[]),{getRootProps:d,getInputProps:v}=C({onDrop:j,accept:{"image/*":[".jpeg",".jpg",".png"]},maxFiles:1}),f=()=>{l(""),a&&URL.revokeObjectURL(a)};return e.jsxs(R,{fullWidth:!0,variant:"outlined",children:[e.jsx(r,{variant:"h6",gutterBottom:!0,component:"label",fontWeight:500,children:"Icon"}),e.jsxs(I,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:a&&e.jsx(L,{variant:"contained",color:"secondary",startIcon:e.jsx(_,{fontSize:"inherit"}),sx:{borderRadius:"50%",boxShadow:o=>o.shadows[18]},size:"small",onClick:f}),children:e.jsx(U,{...d(),src:a,state:"primary",isSoft:!0,sx:{width:74,height:74,border:"2px solid transparent","&:hover":{borderStyle:"dashed",borderColor:"currentcolor",cursor:"pointer"}},alt:"Avatar Preview",children:!a&&s?e.jsx(k,{size:34}):e.jsx(u,{fontSize:"small"})})}),e.jsxs(p,{children:[e.jsx("input",{...v()}),e.jsx(w,{variant:"outlined",color:"secondary",size:"small",component:"span",...d(),disabled:s,sx:{px:s&&0},children:s?"Please wait...":"Upload"}),e.jsxs(r,{variant:"subtitle2",color:"text.secondary",sx:{mt:.5},children:["Accepted files:"," ",e.jsx(r,{color:"text.primary",fontWeight:500,component:"span",children:".jpeg"}),","," ",e.jsx(r,{color:"text.primary",fontWeight:500,component:"span",children:".jpg"}),","," ",e.jsx(r,{color:"text.primary",fontWeight:500,component:"span",children:".png"}),"."]})]}),e.jsx(p,{sx:{display:"inline-block",position:"relative"}})]})]})};export{D as U};
