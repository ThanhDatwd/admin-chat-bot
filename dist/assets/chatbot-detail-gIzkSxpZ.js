import{aV as me,aW as $e,aX as He,aY as Qe,aZ as Q,a_ as We,a$ as ce,b0 as Xe,b1 as Ye,f as F,i as U,j as s,u as B,a as $,k as I,c as H,b2 as G,Q as Ge,V as W,D as L,B as b,aa as ge,T as y,ab as pe,aT as xe,b3 as V,r as E,e as K,a4 as Ve,a5 as Ke,a6 as qe,a7 as de,a8 as _,a9 as Ze,b4 as ve,af as Je,b5 as et,ag as tt,K as Ce,S,b as A,b6 as nt,_ as Z,b7 as rt,J as st,aG as D,b8 as R,aL as ot,aM as at,aP as it,aQ as lt,b9 as ct,ba as dt,bb as ut,A as ht,bc as ft,bd as mt,be as gt,aH as pt,aI as xt,bf as vt,aJ as Ct,bg as jt,bh as Et,h as je,bi as bt,o as yt,y as X,ak as Mt,bj as wt,al as Ee,bk as It,bl as _t,aU as Rt,C as At,bm as Pt}from"./index-YWLvuDMY.js";import{B as ue}from"./bot-XLfQWT26.js";import{D as St}from"./dialog-confirm-delete-zU2Kr5h-.js";function Nt(i){return me({},i)}var he=1440,Dt=2520,q=43200,Tt=86400;function Lt(i,o,d){var c,g;$e(2,arguments);var f=Ye(),h=(c=(g=d==null?void 0:d.locale)!==null&&g!==void 0?g:f.locale)!==null&&c!==void 0?c:He;if(!h.formatDistance)throw new RangeError("locale must contain formatDistance property");var p=Qe(i,o);if(isNaN(p))throw new RangeError("Invalid time value");var e=me(Nt(d),{addSuffix:!!(d!=null&&d.addSuffix),comparison:p}),t,n;p>0?(t=Q(o),n=Q(i)):(t=Q(i),n=Q(o));var r=We(n,t),a=(ce(n)-ce(t))/1e3,l=Math.round((r-a)/60),u;if(l<2)return d!=null&&d.includeSeconds?r<5?h.formatDistance("lessThanXSeconds",5,e):r<10?h.formatDistance("lessThanXSeconds",10,e):r<20?h.formatDistance("lessThanXSeconds",20,e):r<40?h.formatDistance("halfAMinute",0,e):r<60?h.formatDistance("lessThanXMinutes",1,e):h.formatDistance("xMinutes",1,e):l===0?h.formatDistance("lessThanXMinutes",1,e):h.formatDistance("xMinutes",l,e);if(l<45)return h.formatDistance("xMinutes",l,e);if(l<90)return h.formatDistance("aboutXHours",1,e);if(l<he){var C=Math.round(l/60);return h.formatDistance("aboutXHours",C,e)}else{if(l<Dt)return h.formatDistance("xDays",1,e);if(l<q){var v=Math.round(l/he);return h.formatDistance("xDays",v,e)}else if(l<Tt)return u=Math.round(l/q),h.formatDistance("aboutXMonths",u,e)}if(u=Xe(n,t),u<12){var w=Math.round(l/q);return h.formatDistance("xMonths",w,e)}else{var x=u%12,m=Math.floor(u/12);return x<3?h.formatDistance("aboutXYears",m,e):x<9?h.formatDistance("overXYears",m,e):h.formatDistance("almostXYears",m+1,e)}}var J={},Bt=U;Object.defineProperty(J,"__esModule",{value:!0});var be=J.default=void 0,kt=Bt(F()),Ot=s,zt=(0,kt.default)((0,Ot.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined");be=J.default=zt;const Ft=({data:i})=>{var g;B();const{t:o}=$(),{knowledges:d}=I(f=>f.knowledge),c=f=>{const h=ue[f];return s.jsx(s.Fragment,{children:s.jsxs(b,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"center"},children:[s.jsx(pe,{style:{maxWidth:"80%"},color:h==null?void 0:h.color,label:h==null?void 0:h.label}),f===ue.SYNCING.value&&s.jsx(xe,{style:{height:"2px",width:"auto"}})]})})};return s.jsxs(H,{sx:{width:"650px"},children:[s.jsx(G,{titleTypographyProps:{variant:"h4"},title:"Thông tin Bot",action:s.jsx(Ge,{arrow:!0,placement:"top",title:o("Sửa thông tin bot"),children:s.jsx(W,{color:"primary",children:s.jsx(be,{})})})}),s.jsx(L,{}),s.jsxs(b,{textAlign:"center",position:"relative",p:{xs:2,sm:3,md:6},children:[s.jsx(ge,{sx:{mx:"auto",mb:1.5,width:94,height:94},src:i==null?void 0:i.icon}),c(i==null?void 0:i.botStatus),s.jsx(y,{sx:{pt:2},variant:"h3",children:i==null?void 0:i.botName}),s.jsx(y,{variant:"subtitle1",color:"text.secondary",children:(g=d.find(f=>f.knowId===(i==null?void 0:i.knowId)))==null?void 0:g.knowName}),s.jsx(y,{sx:{pt:1},style:{fontSize:16},color:"text.secondary",children:i==null?void 0:i.botDescription})]})]})};var ee={},Ut=U;Object.defineProperty(ee,"__esModule",{value:!0});var ye=ee.default=void 0,$t=Ut(F()),Ht=s,Qt=(0,$t.default)((0,Ht.jsx)("path",{d:"M14.71 6.71a.9959.9959 0 0 0-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L10.83 12l3.88-3.88c.39-.39.38-1.03 0-1.41z"}),"ChevronLeftRounded");ye=ee.default=Qt;var te={},Wt=U;Object.defineProperty(te,"__esModule",{value:!0});var Me=te.default=void 0,Xt=Wt(F()),Yt=s,Gt=(0,Xt.default)((0,Yt.jsx)("path",{d:"M9.29 6.71c-.39.39-.39 1.02 0 1.41L13.17 12l-3.88 3.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z"}),"ChevronRightRounded");Me=te.default=Gt;var ne={},Vt=U;Object.defineProperty(ne,"__esModule",{value:!0});var we=ne.default=void 0,Kt=Vt(F()),qt=s,Zt=(0,Kt.default)((0,qt.jsx)("path",{d:"M11.29 8.71 6.7 13.3c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.38-.39-1.02-.39-1.41 0z"}),"ExpandLessRounded");we=ne.default=Zt;var re={},Jt=U;Object.defineProperty(re,"__esModule",{value:!0});var Ie=re.default=void 0,en=Jt(F()),tn=s,nn=(0,en.default)((0,tn.jsx)("path",{d:"M15.88 9.29 12 13.17 8.12 9.29a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z"}),"ExpandMoreRounded");Ie=re.default=nn;const rn=({tableData:i})=>{const{t:o}=$();B();const{id:d}=V(),c=I(x=>x.auth.admin),[g,f]=E.useState({key:"dateCreated",direction:"ascending"}),[h,p]=E.useState(0),[e,t]=E.useState(3),n=(x,m)=>{p(m)},r=x=>{t(parseInt(x.target.value,10)),p(0)},a=(x,m)=>[...x].sort((j,M)=>j[m.key]<M[m.key]?m.direction==="ascending"?-1:1:j[m.key]>M[m.key]?m.direction==="ascending"?1:-1:0),l=x=>{let m="ascending";g.key===x&&g.direction==="ascending"&&(m="descending"),f({key:x,direction:m})},u=x=>g.key!==x?null:g.direction==="ascending"?s.jsx(Ie,{sx:{color:"text.secondary"},fontSize:"small"}):s.jsx(we,{sx:{color:"text.secondary"},fontSize:"small"}),v=a(i,g).slice(h*e,h*e+e),w=x=>{try{const m=nt({botId:d,customerId:c.customerId});Z.success(o(m.data))}catch(m){Z.error(o("Something wrong please try again!")),console.log(m)}};return s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(G,{titleTypographyProps:{variant:"h4"},title:"Lịch sử training dữ liệu"}),s.jsx(L,{}),s.jsxs(K,{children:[s.jsx(Ve,{children:s.jsxs(Ke,{children:[s.jsx(qe,{children:s.jsxs(de,{children:[s.jsx(_,{onClick:()=>l("filename"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Tên file")," ",u("filename")]})}),s.jsx(_,{onClick:()=>l("owner"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Người training")," ",u("owner")]})}),s.jsx(_,{onClick:()=>l("owner"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Tags")," ",u("owner")]})}),s.jsx(_,{onClick:()=>l("dateCreated"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Ngày tạo")," ",u("dateCreated")]})}),s.jsx(_,{align:"right",children:o("Actions")})]})}),s.jsx(Ze,{children:v.map(x=>s.jsxs(de,{hover:!0,children:[s.jsx(_,{children:s.jsxs(b,{display:"flex",alignItems:"center",children:[ve(x.fileName),s.jsx(y,{sx:{pl:1},variant:"h6",children:x.fileName})]})}),s.jsx(_,{children:s.jsxs(b,{display:"flex",alignItems:"center",children:[x.avatarUrl?s.jsx(ge,{src:x.avatarUrl,sx:{mr:1,height:28,width:28}}):null,s.jsx(Je,{href:"",onClick:m=>m.preventDefault(),underline:"hover",variant:"h6",noWrap:!0,fontWeight:500,children:x.userId})]})}),s.jsx(_,{children:x==null?void 0:x.tags.map((m,j)=>s.jsx(pe,{sx:{margin:"5px"},label:m.tagName,size:"small",variant:"outlined"},m.tagId))}),s.jsx(_,{children:s.jsx(y,{variant:"h6",fontWeight:400,noWrap:!0,children:Lt(new Date(x.createDate),new Date,{addSuffix:!0})})}),s.jsx(_,{sx:{whiteSpace:"nowrap"},align:"right",children:s.jsx(St,{onConfirm:()=>w(x==null?void 0:x.botId)})})]},x.id))})]})}),s.jsx(et,{sx:{p:2,".MuiTablePagination-toolbar":{justifyContent:"space-between"},".MuiTablePagination-spacer":{display:"none"}},children:s.jsx(tt,{component:"div",count:i.length,page:h,onPageChange:n,rowsPerPage:e,onRowsPerPageChange:r,rowsPerPageOptions:[3],ActionsComponent:sn})})]})]})},sn=({count:i,page:o,onPageChange:d})=>{const c=h=>{d(h,o-1)},g=h=>{d(h,o+1)},f=Ce(h=>h.breakpoints.up("sm"));return s.jsx(S,{direction:"row",spacing:1,children:f?s.jsxs(s.Fragment,{children:[s.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:c,disabled:o===0,children:"Trang trước"}),s.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:g,disabled:o>=Math.ceil(i/3)-1,children:"Trang sau"})]}):s.jsxs(s.Fragment,{children:[s.jsx(W,{variant:"outlined",color:"secondary",size:"small",onClick:c,disabled:o===0,startIcon:s.jsx(ye,{})}),s.jsx(W,{variant:"outlined",color:"secondary",size:"small",onClick:g,disabled:o>=Math.ceil(i/3)-1,startIcon:s.jsx(Me,{})})]})})},on=async i=>{try{return await rt("http://52.221.236.203:8085/bot-edge/api/v1/bot/embed/files",i)}catch(o){throw console.error("Error embed files:",o),o}};st(A)(({theme:i})=>({background:D(i.palette.common.white,.08),color:D(i.palette.common.white,.9),borderColor:D(i.palette.common.white,.12),"&:hover":{background:D(i.palette.common.white,.1),color:i.palette.common.white},"&.MuiButton-outlined":{borderColor:D(i.palette.common.white,.12),"&:hover":{borderColor:D(i.palette.common.white,.16)}}}));var an=Object.defineProperty,Y=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,fe=(i,o,d)=>o in i?an(i,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[o]=d,z=(i,o)=>{for(var d in o||(o={}))_e.call(o,d)&&fe(i,d,o[d]);if(Y)for(var d of Y(o))Re.call(o,d)&&fe(i,d,o[d]);return i},se=(i,o)=>{var d={};for(var c in i)_e.call(i,c)&&o.indexOf(c)<0&&(d[c]=i[c]);if(i!=null&&Y)for(var c of Y(i))o.indexOf(c)<0&&Re.call(i,c)&&(d[c]=i[c]);return d};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var N;(i=>{const o=class{constructor(e,t,n,r){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<o.MIN_VERSION||e>o.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let a=[];for(let u=0;u<this.size;u++)a.push(!1);for(let u=0;u<this.size;u++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const l=this.addEccAndInterleave(n);if(this.drawCodewords(l),r==-1){let u=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const v=this.getPenaltyScore();v<u&&(r=C,u=v),this.applyMask(C)}}f(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,t){const n=i.QrSegment.makeSegments(e);return o.encodeSegments(n,t)}static encodeBinary(e,t){const n=i.QrSegment.makeBytes(e);return o.encodeSegments([n],t)}static encodeSegments(e,t,n=1,r=40,a=-1,l=!0){if(!(o.MIN_VERSION<=n&&n<=r&&r<=o.MAX_VERSION)||a<-1||a>7)throw new RangeError("Invalid value");let u,C;for(u=n;;u++){const m=o.getNumDataCodewords(u,t)*8,j=p.getTotalBits(e,u);if(j<=m){C=j;break}if(u>=r)throw new RangeError("Data too long")}for(const m of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])l&&C<=o.getNumDataCodewords(u,m)*8&&(t=m);let v=[];for(const m of e){c(m.mode.modeBits,4,v),c(m.numChars,m.mode.numCharCountBits(u),v);for(const j of m.getData())v.push(j)}f(v.length==C);const w=o.getNumDataCodewords(u,t)*8;f(v.length<=w),c(0,Math.min(4,w-v.length),v),c(0,(8-v.length%8)%8,v),f(v.length%8==0);for(let m=236;v.length<w;m^=253)c(m,8,v);let x=[];for(;x.length*8<v.length;)x.push(0);return v.forEach((m,j)=>x[j>>>3]|=m<<7-(j&7)),new o(u,t,x,a)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)n==0&&r==0||n==0&&r==t-1||n==t-1&&r==0||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let a=0;a<10;a++)n=n<<1^(n>>>9)*1335;const r=(t<<10|n)^21522;f(r>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,g(r,a));this.setFunctionModule(8,7,g(r,6)),this.setFunctionModule(8,8,g(r,7)),this.setFunctionModule(7,8,g(r,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,g(r,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,g(r,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,g(r,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^(e>>>11)*7973;const t=this.version<<12|e;f(t>>>18==0);for(let n=0;n<18;n++){const r=g(t,n),a=this.size-11+n%3,l=Math.floor(n/3);this.setFunctionModule(a,l,r),this.setFunctionModule(l,a,r)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const a=Math.max(Math.abs(r),Math.abs(n)),l=e+r,u=t+n;0<=l&&l<this.size&&0<=u&&u<this.size&&this.setFunctionModule(l,u,a!=2&&a!=4)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,Math.max(Math.abs(r),Math.abs(n))!=1)}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const t=this.version,n=this.errorCorrectionLevel;if(e.length!=o.getNumDataCodewords(t,n))throw new RangeError("Invalid argument");const r=o.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],a=o.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],l=Math.floor(o.getNumRawDataModules(t)/8),u=r-l%r,C=Math.floor(l/r);let v=[];const w=o.reedSolomonComputeDivisor(a);for(let m=0,j=0;m<r;m++){let M=e.slice(j,j+C-a+(m<u?0:1));j+=M.length;const k=o.reedSolomonComputeRemainder(M,w);m<u&&M.push(0),v.push(M.concat(k))}let x=[];for(let m=0;m<v[0].length;m++)v.forEach((j,M)=>{(m!=C-a||M>=u)&&x.push(j[m])});return f(x.length==l),x}drawCodewords(e){if(e.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(let r=0;r<this.size;r++)for(let a=0;a<2;a++){const l=n-a,C=(n+1&2)==0?this.size-1-r:r;!this.isFunction[C][l]&&t<e.length*8&&(this.modules[C][l]=g(e[t>>>3],7-(t&7)),t++)}}f(t==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let a=0;a<this.size;a++){let l=!1,u=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[a][v]==l?(u++,u==5?e+=o.PENALTY_N1:u>5&&e++):(this.finderPenaltyAddHistory(u,C),l||(e+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),l=this.modules[a][v],u=1);e+=this.finderPenaltyTerminateAndCount(l,u,C)*o.PENALTY_N3}for(let a=0;a<this.size;a++){let l=!1,u=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][a]==l?(u++,u==5?e+=o.PENALTY_N1:u>5&&e++):(this.finderPenaltyAddHistory(u,C),l||(e+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),l=this.modules[v][a],u=1);e+=this.finderPenaltyTerminateAndCount(l,u,C)*o.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let l=0;l<this.size-1;l++){const u=this.modules[a][l];u==this.modules[a][l+1]&&u==this.modules[a+1][l]&&u==this.modules[a+1][l+1]&&(e+=o.PENALTY_N2)}let t=0;for(const a of this.modules)t=a.reduce((l,u)=>l+(u?1:0),t);const n=this.size*this.size,r=Math.ceil(Math.abs(t*20-n*10)/n)-1;return f(0<=r&&r<=9),e+=r*o.PENALTY_N4,f(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<o.MIN_VERSION||e>o.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return f(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(o.getNumRawDataModules(e)/8)-o.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*o.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let n=1;for(let r=0;r<e;r++){for(let a=0;a<t.length;a++)t[a]=o.reedSolomonMultiply(t[a],n),a+1<t.length&&(t[a]^=t[a+1]);n=o.reedSolomonMultiply(n,2)}return t}static reedSolomonComputeRemainder(e,t){let n=t.map(r=>0);for(const r of e){const a=r^n.shift();n.push(0),t.forEach((l,u)=>n[u]^=o.reedSolomonMultiply(l,a))}return n}static reedSolomonMultiply(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^(n>>>7)*285,n^=(t>>>r&1)*e;return f(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];f(t<=this.size*3);const n=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(n&&e[0]>=t*4&&e[6]>=t?1:0)+(n&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};let d=o;d.MIN_VERSION=1,d.MAX_VERSION=40,d.PENALTY_N1=3,d.PENALTY_N2=3,d.PENALTY_N3=40,d.PENALTY_N4=10,d.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],d.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=d;function c(e,t,n){if(t<0||t>31||e>>>t)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function g(e,t){return(e>>>t&1)!=0}function f(e){if(!e)throw new Error("Assertion error")}const h=class{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(e){let t=[];for(const n of e)c(n,8,t);return new h(h.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!h.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<e.length;){const r=Math.min(e.length-n,3);c(parseInt(e.substr(n,r),10),r*3+1,t),n+=r}return new h(h.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!h.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],n;for(n=0;n+2<=e.length;n+=2){let r=h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n))*45;r+=h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n+1)),c(r,11,t)}return n<e.length&&c(h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n)),6,t),new h(h.Mode.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:h.isNumeric(e)?[h.makeNumeric(e)]:h.isAlphanumeric(e)?[h.makeAlphanumeric(e)]:[h.makeBytes(h.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)c(e,8,t);else if(e<16384)c(2,2,t),c(e,14,t);else if(e<1e6)c(6,3,t),c(e,21,t);else throw new RangeError("ECI assignment value out of range");return new h(h.Mode.ECI,0,t)}static isNumeric(e){return h.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return h.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const a=r.mode.numCharCountBits(t);if(r.numChars>=1<<a)return 1/0;n+=4+a+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)e.charAt(n)!="%"?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t}};let p=h;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=p})(N||(N={}));(i=>{(o=>{const d=class{constructor(g,f){this.ordinal=g,this.formatBits=f}};let c=d;c.LOW=new d(0,1),c.MEDIUM=new d(1,0),c.QUARTILE=new d(2,3),c.HIGH=new d(3,2),o.Ecc=c})(i.QrCode||(i.QrCode={}))})(N||(N={}));(i=>{(o=>{const d=class{constructor(g,f){this.modeBits=g,this.numBitsCharCount=f}numCharCountBits(g){return this.numBitsCharCount[Math.floor((g+7)/17)]}};let c=d;c.NUMERIC=new d(1,[10,12,14]),c.ALPHANUMERIC=new d(2,[9,11,13]),c.BYTE=new d(4,[8,16,16]),c.KANJI=new d(8,[8,10,12]),c.ECI=new d(7,[0,0,0]),o.Mode=c})(i.QrSegment||(i.QrSegment={}))})(N||(N={}));var T=N;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Ae={L:T.QrCode.Ecc.LOW,M:T.QrCode.Ecc.MEDIUM,Q:T.QrCode.Ecc.QUARTILE,H:T.QrCode.Ecc.HIGH},Pe=128,Se="L",Ne="#FFFFFF",De="#000000",Te=!1,oe=4,ln=.1;function Le(i,o=0){const d=[];return i.forEach(function(c,g){let f=null;c.forEach(function(h,p){if(!h&&f!==null){d.push(`M${f+o} ${g+o}h${p-f}v1H${f+o}z`),f=null;return}if(p===c.length-1){if(!h)return;f===null?d.push(`M${p+o},${g+o} h1v1H${p+o}z`):d.push(`M${f+o},${g+o} h${p+1-f}v1H${f+o}z`);return}h&&f===null&&(f=p)})}),d.join("")}function Be(i,o){return i.slice().map((d,c)=>c<o.y||c>=o.y+o.h?d:d.map((g,f)=>f<o.x||f>=o.x+o.w?g:!1))}function ke(i,o,d,c){if(c==null)return null;const g=d?oe:0,f=i.length+g*2,h=Math.floor(o*ln),p=f/o,e=(c.width||h)*p,t=(c.height||h)*p,n=c.x==null?i.length/2-e/2:c.x*p,r=c.y==null?i.length/2-t/2:c.y*p;let a=null;if(c.excavate){let l=Math.floor(n),u=Math.floor(r),C=Math.ceil(e+n-l),v=Math.ceil(t+r-u);a={x:l,y:u,w:C,h:v}}return{x:n,y:r,h:t,w:e,excavation:a}}var cn=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function dn(i){const o=i,{value:d,size:c=Pe,level:g=Se,bgColor:f=Ne,fgColor:h=De,includeMargin:p=Te,style:e,imageSettings:t}=o,n=se(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),r=t==null?void 0:t.src,a=E.useRef(null),l=E.useRef(null),[u,C]=E.useState(!1);E.useEffect(()=>{if(a.current!=null){const x=a.current,m=x.getContext("2d");if(!m)return;let j=T.QrCode.encodeText(d,Ae[g]).getModules();const M=p?oe:0,k=j.length+M*2,P=ke(j,c,p,t),O=l.current,ae=P!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;ae&&P.excavation!=null&&(j=Be(j,P.excavation));const ie=window.devicePixelRatio||1;x.height=x.width=c*ie;const le=c/k*ie;m.scale(le,le),m.fillStyle=f,m.fillRect(0,0,k,k),m.fillStyle=h,cn?m.fill(new Path2D(Le(j,M))):j.forEach(function(Oe,ze){Oe.forEach(function(Fe,Ue){Fe&&m.fillRect(Ue+M,ze+M,1,1)})}),ae&&m.drawImage(O,P.x+M,P.y+M,P.w,P.h)}}),E.useEffect(()=>{C(!1)},[r]);const v=z({height:c,width:c},e);let w=null;return r!=null&&(w=R.createElement("img",{src:r,key:r,style:{display:"none"},onLoad:()=>{C(!0)},ref:l})),R.createElement(R.Fragment,null,R.createElement("canvas",z({style:v,height:c,width:c,ref:a},n)),w)}function un(i){const o=i,{value:d,size:c=Pe,level:g=Se,bgColor:f=Ne,fgColor:h=De,includeMargin:p=Te,imageSettings:e}=o,t=se(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let n=T.QrCode.encodeText(d,Ae[g]).getModules();const r=p?oe:0,a=n.length+r*2,l=ke(n,c,p,e);let u=null;e!=null&&l!=null&&(l.excavation!=null&&(n=Be(n,l.excavation)),u=R.createElement("image",{xlinkHref:e.src,height:l.h,width:l.w,x:l.x+r,y:l.y+r,preserveAspectRatio:"none"}));const C=Le(n,r);return R.createElement("svg",z({height:c,width:c,viewBox:`0 0 ${a} ${a}`},t),R.createElement("path",{fill:f,d:`M0,0 h${a}v${a}H0z`,shapeRendering:"crispEdges"}),R.createElement("path",{fill:h,d:C,shapeRendering:"crispEdges"}),u)}var hn=i=>{const o=i,{renderAs:d}=o,c=se(o,["renderAs"]);return d==="svg"?R.createElement(un,z({},c)):R.createElement(dn,z({},c))};const fn=()=>{const i=B(),o=Ce(i.breakpoints.down("sm")),[d,c]=E.useState(!1),g=()=>{c(!0)},f=()=>{c(!1)},p={bankName:"Ngân hàng X",accountNumber:"123456789",paymentAmount:"500,000 VNĐ",invoiceNumber:"123456"};return s.jsxs(s.Fragment,{children:[s.jsx(A,{variant:"contained",color:"success",onClick:()=>g(),children:"Payment"}),s.jsxs(ot,{fullScreen:o,open:d,onClose:f,"aria-labelledby":"basic-dialog-title",maxWidth:"xs",fullWidth:!0,children:[s.jsx(at,{id:"basic-dialog-title",children:"Thanh toán"}),s.jsxs(it,{children:[s.jsx(y,{variant:"h6",children:"Thông tin phí"}),s.jsx(y,{children:"Số file / dung lượng nạp: 10 files / 500MB"}),s.jsx(y,{children:"Phí chi trả: 500,000 VNĐ"}),s.jsx(y,{variant:"h6",style:{marginTop:"20px"},children:"Mã QR"}),s.jsx(b,{display:"flex",justifyContent:"center",style:{margin:"20px"},children:s.jsx(hn,{value:`bank:${p.bankName};account:${p.accountNumber};amount:${p.paymentAmount};invoice:${p.invoiceNumber}`,size:300})}),s.jsxs(y,{children:["- Phí cần thanh toán: ",p.paymentAmount]}),s.jsxs(y,{children:["- Nội dung chuyển khoản: Số hóa đơn ",p.invoiceNumber]}),s.jsx(y,{variant:"body2",children:"Chú ý: Nội dung chuyển khoản bắt buộc chứa Số hóa đơn"})]}),s.jsxs(lt,{children:[s.jsx(A,{onClick:f,color:"primary",children:"Quay lại"}),s.jsx(A,{onClick:f,color:"primary",children:"Tiếp tục"})]})]})]})},mn=(i,o=2)=>{if(i===0)return"0 Bytes";const d=1024,c=o<0?0:o,g=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],f=Math.floor(Math.log(i)/Math.log(d));return parseFloat((i/Math.pow(d,f)).toFixed(c))+" "+g[f]},gn=({files:i,setFiles:o})=>{const[d,c]=E.useState({});I(r=>r.auth.admin),V();const g=E.useCallback(r=>{r.forEach(a=>{c(l=>({...l,[a.name]:{progress:0}}))}),o(a=>[...a,...r.map(l=>({file:l,progress:0}))]),r.forEach(a=>{(u=>{const C=setInterval(()=>{c(v=>{if(!v[u.name])return clearInterval(C),v;const w=v[u.name].progress,x=Math.min(w+10,100);return x===100&&clearInterval(C),{...v,[u.name]:{progress:x}}})},200)})(a)})},[]),{getRootProps:f,getInputProps:h,isDragActive:p,isDragAccept:e,isDragReject:t}=ct({onDrop:g,accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxFiles:10}),n=r=>{o(a=>a.filter(({file:l})=>l.name!==r)),c(a=>{const l={...a};return delete l[r],l}),d[r]&&URL.revokeObjectURL(d[r].url)};return s.jsxs(s.Fragment,{children:[s.jsx(dt,{variant:"outlined",elevation:0,sx:{borderWidth:1},children:s.jsx(ut,{...f(),children:s.jsx(K,{children:s.jsxs(S,{spacing:1,justifyContent:"center",direction:"column",alignItems:"center",children:[s.jsxs(ht,{state:"secondary",isSoft:!0,variant:"rounded",sx:{borderWidth:1,borderStyle:"solid",borderColor:r=>r.palette.mode==="dark"?"neutral.800":"neutral.400",backgroundColor:"background.paper"},children:[t&&s.jsx(ft,{fontSize:"small",sx:{color:"error.main"}}),e&&s.jsx(mt,{fontSize:"small",sx:{color:"success.main"}}),!p&&s.jsx(gt,{fontSize:"small",sx:{color:"text.primary"}})]}),s.jsx(b,{children:s.jsxs(y,{textAlign:"center",variant:"h6",fontWeight:400,color:e?"success.main":t?"error.main":"text.secondary",children:[s.jsx(y,{variant:"h6",fontWeight:600,component:"span",color:e?"success.main":t?"error.main":"primary.main",children:"Nhấp để tải lên"})," ","hoặc kéo và thả tài liệu vào đây. Tối đa 10 tệp"]})})]})})})}),i&&i.length>0?s.jsx(pt,{component:"div",disablePadding:!0,children:s.jsx(S,{spacing:2,mt:2,children:i.map(({file:r})=>{var a,l;return s.jsx(H,{variant:"outlined",elevation:0,sx:{"&:hover":{borderColor:u=>u.palette.mode==="dark"?"neutral.800":"neutral.500"}},children:s.jsxs(xt,{component:"div",alignItems:"flex-start",children:[s.jsx(vt,{sx:{minWidth:38,color:"neutral.700"},children:ve(r.name)}),s.jsx(Ct,{primary:s.jsxs(b,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",children:[s.jsxs(b,{overflow:"hidden",children:[s.jsx(y,{noWrap:!0,variant:"subtitle1",fontWeight:500,color:"text.primary",children:r.name}),s.jsx(y,{variant:"subtitle2",color:"text.secondary",children:mn(r.size)})]}),s.jsx(W,{"aria-label":"delete",onClick:()=>n(r.name),size:"small",color:"error",children:s.jsx(jt,{fontSize:"small"})})]}),disableTypography:!0,secondary:s.jsxs(b,{display:"flex",alignItems:"center",children:[s.jsx(b,{flex:1,children:s.jsx(xe,{variant:"determinate",value:((a=d[r.name])==null?void 0:a.progress)||0})}),s.jsxs(y,{variant:"subtitle2",sx:{pl:.5},children:[((l=d[r.name])==null?void 0:l.progress)||0,"%"]})]})})]})},r.name)})})}):s.jsxs(S,{spacing:.5,justifyContent:"center",direction:"column",alignItems:"center",pt:3,pb:2,children:[s.jsx("input",{...h()}),s.jsxs(b,{textAlign:"center",children:[s.jsx(y,{variant:"h5",color:"text.primary",children:"Không có tệp nào được thêm vào"}),s.jsx(y,{color:"text.secondary",fontWeight:400,children:"Vui lòng tải lên các tài liệu cần thiết"})]}),s.jsx(b,{width:"100%",children:s.jsx(L,{flexItem:!0,sx:{my:1,mx:"auto",width:"55%"}})}),s.jsx(A,{startIcon:s.jsx(Et,{}),variant:"outlined",color:"secondary",size:"small",...f(),children:"Thêm tệp"})]})]})},pn=({onEmbed:i})=>{B();const{t:o}=$(),[d,c]=E.useState([]),[g,f]=E.useState([]);E.useState(!1);const h=I(l=>l.auth.admin),{id:p}=V(),e=je(),t=I(l=>l.common.loading),n=I(l=>l.common.refresh),r=async l=>{try{const u=await wt({file:l,botId:p,userId:h.id,customerId:h.customerId,isPublic:!1});return delete u.fileLink,delete u.tags,u}catch(u){console.error("Error upload file:",u)}},a=async()=>{e(X(!0));let l=[];try{l=await Promise.all(d.map(async u=>await r(u==null?void 0:u.file)));try{const C=await on({botId:p,sitemapUrls:[],sourceUrls:[],fileIds:l});c([]),f([]),i(),Z.success(o("Đang tải dữ liệu vui lòng đợi")),e(Mt(!n))}catch(u){console.error("Error embedding bot:",u)}}catch(u){console.error("Error upload file:",u)}finally{e(X(!1))}};return s.jsx(s.Fragment,{children:s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(G,{titleTypographyProps:{variant:"h4"},title:"Training dữ liệu Bot"}),s.jsx(L,{}),s.jsx(K,{sx:{py:3},children:s.jsx(gn,{files:d,setFiles:c,setUploadFiles:f})}),s.jsx(L,{}),s.jsxs(bt,{sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:[s.jsx(fn,{}),d.length>0&&s.jsxs(A,{variant:"contained",color:"success",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},onClick:()=>a(),children:["Embed",t&&s.jsxs(b,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},color:"common.white",children:[" ",s.jsx(yt,{style:{height:"20px",width:"20px"},color:"inherit"})]})]})]})]})})},xn=({botId:i})=>{$(),B();const o=Ee(),d=I(t=>t.auth.admin),c=I(t=>t.common.refresh),[g,f]=E.useState(0),[h,p]=E.useState([]),e=E.useCallback(async(t,n)=>{if(i)try{const r=await It.getUserWithGranted({customerId:d.customerId,botId:i,pagination:{pageNumber:t.pageNumber,pageSize:t.pageSize}});o()&&(p(r.content),f(r.totalElements))}catch(r){console.error(r)}else p([])},[o,c,i]);return s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(G,{titleTypographyProps:{variant:"h4"},title:"Danh sách người dùng được truy cập Bot"}),s.jsx(L,{}),s.jsx(K,{children:s.jsx(_t,{totalCount:g,users:h,botId:i,fetchData:e})})]})},En=()=>{B(),$();const i=Ee(),{id:o}=V(),[d,c]=E.useState({}),[g,f]=E.useState([]),h=I(r=>r.auth.admin);I(r=>r.common.loading);const p=I(r=>r.common.refresh),e=je(),t=E.useCallback(async()=>{try{const r=await Rt.getBot({botId:o});i()&&c(r)}catch(r){console.error(r)}},[o,i]);E.useEffect(()=>{let r=null;return r=setInterval(()=>{t()},5e3),()=>clearInterval(r)},[d,p]);const n=async()=>{try{const r=await Pt({botId:o,customerId:h.customerId});f(r)}catch(r){console.error("Error fetching user files:",r)}};return E.useEffect(()=>{e(X(!0));try{t(),n()}catch(r){console.error("Error",r)}finally{e(X(!1))}},[o,p]),s.jsx(s.Fragment,{children:s.jsx(b,{px:{xs:2,sm:3},pt:{xs:2,sm:3},component:"main",flex:1,display:"flex",flexDirection:"column",children:s.jsxs(At,{disableGutters:!0,maxWidth:"xl",children:[s.jsx(b,{children:s.jsxs(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:[s.jsx(Ft,{data:d}),s.jsx(pn,{onEmbed:()=>n()})]})}),s.jsx(b,{pt:{xs:2,sm:3},children:s.jsx(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:s.jsx(rn,{tableData:g})})}),s.jsx(b,{pt:{xs:2,sm:3},children:s.jsx(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:s.jsx(xn,{botId:o})})})]})})})};export{En as default};
