import{aV as me,aW as ze,aX as Ue,aY as $e,aZ as $,a_ as He,a$ as ce,b0 as Qe,b1 as Xe,f as F,i as z,j as o,u as T,a as U,k as I,c as Y,b2 as W,Q as Ye,V,D as k,B as b,aa as ge,T as j,ab as pe,aT as We,b3 as q,r as M,e as Z,a4 as Ge,a5 as Ve,a6 as Ke,a7 as ue,a8 as _,a9 as qe,b4 as Ze,af as Je,b5 as et,ag as tt,K as xe,S as H,b as A,b6 as nt,_ as K,b7 as rt,J as st,aG as S,b8 as R,aL as ot,aM as at,aP as it,aQ as lt,h as ve,b9 as ct,ba as ut,o as dt,y as Q,ak as ht,bb as ft,al as Ce,bc as mt,bd as gt,aU as pt,C as xt,be as vt}from"./index-e5JuFKv_.js";import{B as de}from"./bot-XLfQWT26.js";import{D as Ct}from"./dialog-confirm-delete-tAEcVc75.js";function Et(i){return me({},i)}var he=1440,Mt=2520,G=43200,yt=86400;function bt(i,s,c){var l,g;ze(2,arguments);var f=Xe(),h=(l=(g=c==null?void 0:c.locale)!==null&&g!==void 0?g:f.locale)!==null&&l!==void 0?l:Ue;if(!h.formatDistance)throw new RangeError("locale must contain formatDistance property");var p=$e(i,s);if(isNaN(p))throw new RangeError("Invalid time value");var e=me(Et(c),{addSuffix:!!(c!=null&&c.addSuffix),comparison:p}),t,n;p>0?(t=$(s),n=$(i)):(t=$(i),n=$(s));var r=He(n,t),a=(ce(n)-ce(t))/1e3,u=Math.round((r-a)/60),d;if(u<2)return c!=null&&c.includeSeconds?r<5?h.formatDistance("lessThanXSeconds",5,e):r<10?h.formatDistance("lessThanXSeconds",10,e):r<20?h.formatDistance("lessThanXSeconds",20,e):r<40?h.formatDistance("halfAMinute",0,e):r<60?h.formatDistance("lessThanXMinutes",1,e):h.formatDistance("xMinutes",1,e):u===0?h.formatDistance("lessThanXMinutes",1,e):h.formatDistance("xMinutes",u,e);if(u<45)return h.formatDistance("xMinutes",u,e);if(u<90)return h.formatDistance("aboutXHours",1,e);if(u<he){var C=Math.round(u/60);return h.formatDistance("aboutXHours",C,e)}else{if(u<Mt)return h.formatDistance("xDays",1,e);if(u<G){var v=Math.round(u/he);return h.formatDistance("xDays",v,e)}else if(u<yt)return d=Math.round(u/G),h.formatDistance("aboutXMonths",d,e)}if(d=Qe(n,t),d<12){var w=Math.round(u/G);return h.formatDistance("xMonths",w,e)}else{var x=d%12,m=Math.floor(d/12);return x<3?h.formatDistance("aboutXYears",m,e):x<9?h.formatDistance("overXYears",m,e):h.formatDistance("almostXYears",m+1,e)}}var J={},wt=z;Object.defineProperty(J,"__esModule",{value:!0});var Ee=J.default=void 0,jt=wt(F()),_t=o,Rt=(0,jt.default)((0,_t.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined");Ee=J.default=Rt;const It=({data:i})=>{var g;T();const{t:s}=U(),{knowledges:c}=I(f=>f.knowledge),l=f=>{const h=de[f];return o.jsx(o.Fragment,{children:o.jsxs(b,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"center"},children:[o.jsx(pe,{style:{maxWidth:"80%"},color:h==null?void 0:h.color,label:h==null?void 0:h.label}),f===de.SYNCING.value&&o.jsx(We,{style:{height:"2px",width:"auto"}})]})})};return o.jsxs(Y,{sx:{width:"650px"},children:[o.jsx(W,{titleTypographyProps:{variant:"h4"},title:"Thông tin Bot",action:o.jsx(Ye,{arrow:!0,placement:"top",title:s("Sửa thông tin bot"),children:o.jsx(V,{color:"primary",children:o.jsx(Ee,{})})})}),o.jsx(k,{}),o.jsxs(b,{textAlign:"center",position:"relative",p:{xs:2,sm:3,md:6},children:[o.jsx(ge,{sx:{mx:"auto",mb:1.5,width:94,height:94},src:i==null?void 0:i.icon}),l(i==null?void 0:i.botStatus),o.jsx(j,{sx:{pt:2},variant:"h3",children:i==null?void 0:i.botName}),o.jsx(j,{variant:"subtitle1",color:"text.secondary",children:(g=c.find(f=>f.knowId===(i==null?void 0:i.knowId)))==null?void 0:g.knowName}),o.jsx(j,{sx:{pt:1},style:{fontSize:16},color:"text.secondary",children:i==null?void 0:i.botDescription})]})]})};var ee={},Pt=z;Object.defineProperty(ee,"__esModule",{value:!0});var Me=ee.default=void 0,At=Pt(F()),Nt=o,St=(0,At.default)((0,Nt.jsx)("path",{d:"M14.71 6.71a.9959.9959 0 0 0-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L10.83 12l3.88-3.88c.39-.39.38-1.03 0-1.41z"}),"ChevronLeftRounded");Me=ee.default=St;var te={},Dt=z;Object.defineProperty(te,"__esModule",{value:!0});var ye=te.default=void 0,Tt=Dt(F()),Lt=o,Ot=(0,Tt.default)((0,Lt.jsx)("path",{d:"M9.29 6.71c-.39.39-.39 1.02 0 1.41L13.17 12l-3.88 3.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z"}),"ChevronRightRounded");ye=te.default=Ot;var ne={},kt=z;Object.defineProperty(ne,"__esModule",{value:!0});var be=ne.default=void 0,Bt=kt(F()),Ft=o,zt=(0,Bt.default)((0,Ft.jsx)("path",{d:"M11.29 8.71 6.7 13.3c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.38-.39-1.02-.39-1.41 0z"}),"ExpandLessRounded");be=ne.default=zt;var re={},Ut=z;Object.defineProperty(re,"__esModule",{value:!0});var we=re.default=void 0,$t=Ut(F()),Ht=o,Qt=(0,$t.default)((0,Ht.jsx)("path",{d:"M15.88 9.29 12 13.17 8.12 9.29a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z"}),"ExpandMoreRounded");we=re.default=Qt;const Xt=({tableData:i})=>{const{t:s}=U();T();const{id:c}=q(),l=I(x=>x.auth.admin),[g,f]=M.useState({key:"dateCreated",direction:"ascending"}),[h,p]=M.useState(0),[e,t]=M.useState(3),n=(x,m)=>{p(m)},r=x=>{t(parseInt(x.target.value,10)),p(0)},a=(x,m)=>[...x].sort((E,y)=>E[m.key]<y[m.key]?m.direction==="ascending"?-1:1:E[m.key]>y[m.key]?m.direction==="ascending"?1:-1:0),u=x=>{let m="ascending";g.key===x&&g.direction==="ascending"&&(m="descending"),f({key:x,direction:m})},d=x=>g.key!==x?null:g.direction==="ascending"?o.jsx(we,{sx:{color:"text.secondary"},fontSize:"small"}):o.jsx(be,{sx:{color:"text.secondary"},fontSize:"small"}),v=a(i,g).slice(h*e,h*e+e),w=x=>{try{const m=nt({botId:c,customerId:l.customerId});K.success(s(m.data))}catch(m){K.error(s("Something wrong please try again!")),console.log(m)}};return o.jsxs(Y,{sx:{width:"100%"},children:[o.jsx(W,{titleTypographyProps:{variant:"h4"},title:"Lịch sử training dữ liệu"}),o.jsx(k,{}),o.jsxs(Z,{children:[o.jsx(Ge,{children:o.jsxs(Ve,{children:[o.jsx(Ke,{children:o.jsxs(ue,{children:[o.jsx(_,{onClick:()=>u("filename"),children:o.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[s("Tên file")," ",d("filename")]})}),o.jsx(_,{onClick:()=>u("owner"),children:o.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[s("Người training")," ",d("owner")]})}),o.jsx(_,{onClick:()=>u("owner"),children:o.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[s("Tags")," ",d("owner")]})}),o.jsx(_,{onClick:()=>u("dateCreated"),children:o.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[s("Ngày tạo")," ",d("dateCreated")]})}),o.jsx(_,{align:"right",children:s("Actions")})]})}),o.jsx(qe,{children:v.map(x=>o.jsxs(ue,{hover:!0,children:[o.jsx(_,{children:o.jsxs(b,{display:"flex",alignItems:"center",children:[Ze(x.fileName),o.jsx(j,{sx:{pl:1},variant:"h6",children:x.fileName})]})}),o.jsx(_,{children:o.jsxs(b,{display:"flex",alignItems:"center",children:[x.avatarUrl?o.jsx(ge,{src:x.avatarUrl,sx:{mr:1,height:28,width:28}}):null,o.jsx(Je,{href:"",onClick:m=>m.preventDefault(),underline:"hover",variant:"h6",noWrap:!0,fontWeight:500,children:x.userId})]})}),o.jsx(_,{children:x==null?void 0:x.tags.map((m,E)=>o.jsx(pe,{sx:{margin:"5px"},label:m.tagName,size:"small",variant:"outlined"},m.tagId))}),o.jsx(_,{children:o.jsx(j,{variant:"h6",fontWeight:400,noWrap:!0,children:bt(new Date(x.createDate),new Date,{addSuffix:!0})})}),o.jsx(_,{sx:{whiteSpace:"nowrap"},align:"right",children:o.jsx(Ct,{onConfirm:()=>w(x==null?void 0:x.botId)})})]},x.id))})]})}),o.jsx(et,{sx:{p:2,".MuiTablePagination-toolbar":{justifyContent:"space-between"},".MuiTablePagination-spacer":{display:"none"}},children:o.jsx(tt,{component:"div",count:i.length,page:h,onPageChange:n,rowsPerPage:e,onRowsPerPageChange:r,rowsPerPageOptions:[3],ActionsComponent:Yt})})]})]})},Yt=({count:i,page:s,onPageChange:c})=>{const l=h=>{c(h,s-1)},g=h=>{c(h,s+1)},f=xe(h=>h.breakpoints.up("sm"));return o.jsx(H,{direction:"row",spacing:1,children:f?o.jsxs(o.Fragment,{children:[o.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:l,disabled:s===0,children:"Trang trước"}),o.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:g,disabled:s>=Math.ceil(i/3)-1,children:"Trang sau"})]}):o.jsxs(o.Fragment,{children:[o.jsx(V,{variant:"outlined",color:"secondary",size:"small",onClick:l,disabled:s===0,startIcon:o.jsx(Me,{})}),o.jsx(V,{variant:"outlined",color:"secondary",size:"small",onClick:g,disabled:s>=Math.ceil(i/3)-1,startIcon:o.jsx(ye,{})})]})})},Wt=async i=>{try{return await rt("http://52.221.236.203:8085/bot-edge/api/v1/bot/embed/files",i)}catch(s){throw console.error("Error embed files:",s),s}};st(A)(({theme:i})=>({background:S(i.palette.common.white,.08),color:S(i.palette.common.white,.9),borderColor:S(i.palette.common.white,.12),"&:hover":{background:S(i.palette.common.white,.1),color:i.palette.common.white},"&.MuiButton-outlined":{borderColor:S(i.palette.common.white,.12),"&:hover":{borderColor:S(i.palette.common.white,.16)}}}));var Gt=Object.defineProperty,X=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,fe=(i,s,c)=>s in i?Gt(i,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[s]=c,B=(i,s)=>{for(var c in s||(s={}))je.call(s,c)&&fe(i,c,s[c]);if(X)for(var c of X(s))_e.call(s,c)&&fe(i,c,s[c]);return i},se=(i,s)=>{var c={};for(var l in i)je.call(i,l)&&s.indexOf(l)<0&&(c[l]=i[l]);if(i!=null&&X)for(var l of X(i))s.indexOf(l)<0&&_e.call(i,l)&&(c[l]=i[l]);return c};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var N;(i=>{const s=class{constructor(e,t,n,r){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<s.MIN_VERSION||e>s.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let a=[];for(let d=0;d<this.size;d++)a.push(!1);for(let d=0;d<this.size;d++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const u=this.addEccAndInterleave(n);if(this.drawCodewords(u),r==-1){let d=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const v=this.getPenaltyScore();v<d&&(r=C,d=v),this.applyMask(C)}}f(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,t){const n=i.QrSegment.makeSegments(e);return s.encodeSegments(n,t)}static encodeBinary(e,t){const n=i.QrSegment.makeBytes(e);return s.encodeSegments([n],t)}static encodeSegments(e,t,n=1,r=40,a=-1,u=!0){if(!(s.MIN_VERSION<=n&&n<=r&&r<=s.MAX_VERSION)||a<-1||a>7)throw new RangeError("Invalid value");let d,C;for(d=n;;d++){const m=s.getNumDataCodewords(d,t)*8,E=p.getTotalBits(e,d);if(E<=m){C=E;break}if(d>=r)throw new RangeError("Data too long")}for(const m of[s.Ecc.MEDIUM,s.Ecc.QUARTILE,s.Ecc.HIGH])u&&C<=s.getNumDataCodewords(d,m)*8&&(t=m);let v=[];for(const m of e){l(m.mode.modeBits,4,v),l(m.numChars,m.mode.numCharCountBits(d),v);for(const E of m.getData())v.push(E)}f(v.length==C);const w=s.getNumDataCodewords(d,t)*8;f(v.length<=w),l(0,Math.min(4,w-v.length),v),l(0,(8-v.length%8)%8,v),f(v.length%8==0);for(let m=236;v.length<w;m^=253)l(m,8,v);let x=[];for(;x.length*8<v.length;)x.push(0);return v.forEach((m,E)=>x[E>>>3]|=m<<7-(E&7)),new s(d,t,x,a)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)n==0&&r==0||n==0&&r==t-1||n==t-1&&r==0||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let a=0;a<10;a++)n=n<<1^(n>>>9)*1335;const r=(t<<10|n)^21522;f(r>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,g(r,a));this.setFunctionModule(8,7,g(r,6)),this.setFunctionModule(8,8,g(r,7)),this.setFunctionModule(7,8,g(r,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,g(r,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,g(r,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,g(r,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^(e>>>11)*7973;const t=this.version<<12|e;f(t>>>18==0);for(let n=0;n<18;n++){const r=g(t,n),a=this.size-11+n%3,u=Math.floor(n/3);this.setFunctionModule(a,u,r),this.setFunctionModule(u,a,r)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const a=Math.max(Math.abs(r),Math.abs(n)),u=e+r,d=t+n;0<=u&&u<this.size&&0<=d&&d<this.size&&this.setFunctionModule(u,d,a!=2&&a!=4)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,Math.max(Math.abs(r),Math.abs(n))!=1)}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const t=this.version,n=this.errorCorrectionLevel;if(e.length!=s.getNumDataCodewords(t,n))throw new RangeError("Invalid argument");const r=s.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],a=s.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],u=Math.floor(s.getNumRawDataModules(t)/8),d=r-u%r,C=Math.floor(u/r);let v=[];const w=s.reedSolomonComputeDivisor(a);for(let m=0,E=0;m<r;m++){let y=e.slice(E,E+C-a+(m<d?0:1));E+=y.length;const L=s.reedSolomonComputeRemainder(y,w);m<d&&y.push(0),v.push(y.concat(L))}let x=[];for(let m=0;m<v[0].length;m++)v.forEach((E,y)=>{(m!=C-a||y>=d)&&x.push(E[m])});return f(x.length==u),x}drawCodewords(e){if(e.length!=Math.floor(s.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(let r=0;r<this.size;r++)for(let a=0;a<2;a++){const u=n-a,C=(n+1&2)==0?this.size-1-r:r;!this.isFunction[C][u]&&t<e.length*8&&(this.modules[C][u]=g(e[t>>>3],7-(t&7)),t++)}}f(t==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let a=0;a<this.size;a++){let u=!1,d=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[a][v]==u?(d++,d==5?e+=s.PENALTY_N1:d>5&&e++):(this.finderPenaltyAddHistory(d,C),u||(e+=this.finderPenaltyCountPatterns(C)*s.PENALTY_N3),u=this.modules[a][v],d=1);e+=this.finderPenaltyTerminateAndCount(u,d,C)*s.PENALTY_N3}for(let a=0;a<this.size;a++){let u=!1,d=0,C=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][a]==u?(d++,d==5?e+=s.PENALTY_N1:d>5&&e++):(this.finderPenaltyAddHistory(d,C),u||(e+=this.finderPenaltyCountPatterns(C)*s.PENALTY_N3),u=this.modules[v][a],d=1);e+=this.finderPenaltyTerminateAndCount(u,d,C)*s.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let u=0;u<this.size-1;u++){const d=this.modules[a][u];d==this.modules[a][u+1]&&d==this.modules[a+1][u]&&d==this.modules[a+1][u+1]&&(e+=s.PENALTY_N2)}let t=0;for(const a of this.modules)t=a.reduce((u,d)=>u+(d?1:0),t);const n=this.size*this.size,r=Math.ceil(Math.abs(t*20-n*10)/n)-1;return f(0<=r&&r<=9),e+=r*s.PENALTY_N4,f(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<s.MIN_VERSION||e>s.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return f(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(s.getNumRawDataModules(e)/8)-s.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*s.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let n=1;for(let r=0;r<e;r++){for(let a=0;a<t.length;a++)t[a]=s.reedSolomonMultiply(t[a],n),a+1<t.length&&(t[a]^=t[a+1]);n=s.reedSolomonMultiply(n,2)}return t}static reedSolomonComputeRemainder(e,t){let n=t.map(r=>0);for(const r of e){const a=r^n.shift();n.push(0),t.forEach((u,d)=>n[d]^=s.reedSolomonMultiply(u,a))}return n}static reedSolomonMultiply(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^(n>>>7)*285,n^=(t>>>r&1)*e;return f(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];f(t<=this.size*3);const n=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(n&&e[0]>=t*4&&e[6]>=t?1:0)+(n&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};let c=s;c.MIN_VERSION=1,c.MAX_VERSION=40,c.PENALTY_N1=3,c.PENALTY_N2=3,c.PENALTY_N3=40,c.PENALTY_N4=10,c.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],c.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=c;function l(e,t,n){if(t<0||t>31||e>>>t)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function g(e,t){return(e>>>t&1)!=0}function f(e){if(!e)throw new Error("Assertion error")}const h=class{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(e){let t=[];for(const n of e)l(n,8,t);return new h(h.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!h.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<e.length;){const r=Math.min(e.length-n,3);l(parseInt(e.substr(n,r),10),r*3+1,t),n+=r}return new h(h.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!h.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],n;for(n=0;n+2<=e.length;n+=2){let r=h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n))*45;r+=h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n+1)),l(r,11,t)}return n<e.length&&l(h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n)),6,t),new h(h.Mode.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:h.isNumeric(e)?[h.makeNumeric(e)]:h.isAlphanumeric(e)?[h.makeAlphanumeric(e)]:[h.makeBytes(h.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)l(e,8,t);else if(e<16384)l(2,2,t),l(e,14,t);else if(e<1e6)l(6,3,t),l(e,21,t);else throw new RangeError("ECI assignment value out of range");return new h(h.Mode.ECI,0,t)}static isNumeric(e){return h.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return h.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const a=r.mode.numCharCountBits(t);if(r.numChars>=1<<a)return 1/0;n+=4+a+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)e.charAt(n)!="%"?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t}};let p=h;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=p})(N||(N={}));(i=>{(s=>{const c=class{constructor(g,f){this.ordinal=g,this.formatBits=f}};let l=c;l.LOW=new c(0,1),l.MEDIUM=new c(1,0),l.QUARTILE=new c(2,3),l.HIGH=new c(3,2),s.Ecc=l})(i.QrCode||(i.QrCode={}))})(N||(N={}));(i=>{(s=>{const c=class{constructor(g,f){this.modeBits=g,this.numBitsCharCount=f}numCharCountBits(g){return this.numBitsCharCount[Math.floor((g+7)/17)]}};let l=c;l.NUMERIC=new c(1,[10,12,14]),l.ALPHANUMERIC=new c(2,[9,11,13]),l.BYTE=new c(4,[8,16,16]),l.KANJI=new c(8,[8,10,12]),l.ECI=new c(7,[0,0,0]),s.Mode=l})(i.QrSegment||(i.QrSegment={}))})(N||(N={}));var D=N;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Re={L:D.QrCode.Ecc.LOW,M:D.QrCode.Ecc.MEDIUM,Q:D.QrCode.Ecc.QUARTILE,H:D.QrCode.Ecc.HIGH},Ie=128,Pe="L",Ae="#FFFFFF",Ne="#000000",Se=!1,oe=4,Vt=.1;function De(i,s=0){const c=[];return i.forEach(function(l,g){let f=null;l.forEach(function(h,p){if(!h&&f!==null){c.push(`M${f+s} ${g+s}h${p-f}v1H${f+s}z`),f=null;return}if(p===l.length-1){if(!h)return;f===null?c.push(`M${p+s},${g+s} h1v1H${p+s}z`):c.push(`M${f+s},${g+s} h${p+1-f}v1H${f+s}z`);return}h&&f===null&&(f=p)})}),c.join("")}function Te(i,s){return i.slice().map((c,l)=>l<s.y||l>=s.y+s.h?c:c.map((g,f)=>f<s.x||f>=s.x+s.w?g:!1))}function Le(i,s,c,l){if(l==null)return null;const g=c?oe:0,f=i.length+g*2,h=Math.floor(s*Vt),p=f/s,e=(l.width||h)*p,t=(l.height||h)*p,n=l.x==null?i.length/2-e/2:l.x*p,r=l.y==null?i.length/2-t/2:l.y*p;let a=null;if(l.excavate){let u=Math.floor(n),d=Math.floor(r),C=Math.ceil(e+n-u),v=Math.ceil(t+r-d);a={x:u,y:d,w:C,h:v}}return{x:n,y:r,h:t,w:e,excavation:a}}var Kt=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function qt(i){const s=i,{value:c,size:l=Ie,level:g=Pe,bgColor:f=Ae,fgColor:h=Ne,includeMargin:p=Se,style:e,imageSettings:t}=s,n=se(s,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),r=t==null?void 0:t.src,a=M.useRef(null),u=M.useRef(null),[d,C]=M.useState(!1);M.useEffect(()=>{if(a.current!=null){const x=a.current,m=x.getContext("2d");if(!m)return;let E=D.QrCode.encodeText(c,Re[g]).getModules();const y=p?oe:0,L=E.length+y*2,P=Le(E,l,p,t),O=u.current,ae=P!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;ae&&P.excavation!=null&&(E=Te(E,P.excavation));const ie=window.devicePixelRatio||1;x.height=x.width=l*ie;const le=l/L*ie;m.scale(le,le),m.fillStyle=f,m.fillRect(0,0,L,L),m.fillStyle=h,Kt?m.fill(new Path2D(De(E,y))):E.forEach(function(Oe,ke){Oe.forEach(function(Be,Fe){Be&&m.fillRect(Fe+y,ke+y,1,1)})}),ae&&m.drawImage(O,P.x+y,P.y+y,P.w,P.h)}}),M.useEffect(()=>{C(!1)},[r]);const v=B({height:l,width:l},e);let w=null;return r!=null&&(w=R.createElement("img",{src:r,key:r,style:{display:"none"},onLoad:()=>{C(!0)},ref:u})),R.createElement(R.Fragment,null,R.createElement("canvas",B({style:v,height:l,width:l,ref:a},n)),w)}function Zt(i){const s=i,{value:c,size:l=Ie,level:g=Pe,bgColor:f=Ae,fgColor:h=Ne,includeMargin:p=Se,imageSettings:e}=s,t=se(s,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let n=D.QrCode.encodeText(c,Re[g]).getModules();const r=p?oe:0,a=n.length+r*2,u=Le(n,l,p,e);let d=null;e!=null&&u!=null&&(u.excavation!=null&&(n=Te(n,u.excavation)),d=R.createElement("image",{xlinkHref:e.src,height:u.h,width:u.w,x:u.x+r,y:u.y+r,preserveAspectRatio:"none"}));const C=De(n,r);return R.createElement("svg",B({height:l,width:l,viewBox:`0 0 ${a} ${a}`},t),R.createElement("path",{fill:f,d:`M0,0 h${a}v${a}H0z`,shapeRendering:"crispEdges"}),R.createElement("path",{fill:h,d:C,shapeRendering:"crispEdges"}),d)}var Jt=i=>{const s=i,{renderAs:c}=s,l=se(s,["renderAs"]);return c==="svg"?R.createElement(Zt,B({},l)):R.createElement(qt,B({},l))};const en=()=>{const i=T(),s=xe(i.breakpoints.down("sm")),[c,l]=M.useState(!1),g=()=>{l(!0)},f=()=>{l(!1)},p={bankName:"Ngân hàng X",accountNumber:"123456789",paymentAmount:"500,000 VNĐ",invoiceNumber:"123456"};return o.jsxs(o.Fragment,{children:[o.jsx(A,{variant:"contained",color:"success",onClick:()=>g(),children:"Payment"}),o.jsxs(ot,{fullScreen:s,open:c,onClose:f,"aria-labelledby":"basic-dialog-title",maxWidth:"xs",fullWidth:!0,children:[o.jsx(at,{id:"basic-dialog-title",children:"Thanh toán"}),o.jsxs(it,{children:[o.jsx(j,{variant:"h6",children:"Thông tin phí"}),o.jsx(j,{children:"Số file / dung lượng nạp: 10 files / 500MB"}),o.jsx(j,{children:"Phí chi trả: 500,000 VNĐ"}),o.jsx(j,{variant:"h6",style:{marginTop:"20px"},children:"Mã QR"}),o.jsx(b,{display:"flex",justifyContent:"center",style:{margin:"20px"},children:o.jsx(Jt,{value:`bank:${p.bankName};account:${p.accountNumber};amount:${p.paymentAmount};invoice:${p.invoiceNumber}`,size:300})}),o.jsxs(j,{children:["- Phí cần thanh toán: ",p.paymentAmount]}),o.jsxs(j,{children:["- Nội dung chuyển khoản: Số hóa đơn ",p.invoiceNumber]}),o.jsx(j,{variant:"body2",children:"Chú ý: Nội dung chuyển khoản bắt buộc chứa Số hóa đơn"})]}),o.jsxs(lt,{children:[o.jsx(A,{onClick:f,color:"primary",children:"Quay lại"}),o.jsx(A,{onClick:f,color:"primary",children:"Tiếp tục"})]})]})]})},tn=({onEmbed:i})=>{T();const{t:s}=U(),[c,l]=M.useState([]),[g,f]=M.useState([]);M.useState(!1);const h=I(u=>u.auth.admin),{id:p}=q(),e=ve(),t=I(u=>u.common.loading),n=I(u=>u.common.refresh),r=async u=>{try{const d=await ft({file:u,botId:p,userId:h.id,customerId:h.customerId,isPublic:!1});return delete d.fileLink,delete d.tags,d}catch(d){console.error("Error upload file:",d)}},a=async()=>{e(Q(!0));let u=[];try{u=await Promise.all(c.map(async d=>await r(d==null?void 0:d.file)));try{const C=await Wt({botId:p,sitemapUrls:[],sourceUrls:[],fileIds:u});l([]),f([]),i(),K.success(s("Đang tải dữ liệu vui lòng đợi")),e(ht(!n))}catch(d){console.error("Error embedding bot:",d)}}catch(d){console.error("Error upload file:",d)}finally{e(Q(!1))}};return o.jsx(o.Fragment,{children:o.jsxs(Y,{sx:{width:"100%"},children:[o.jsx(W,{titleTypographyProps:{variant:"h4"},title:"Training dữ liệu Bot"}),o.jsx(k,{}),o.jsx(Z,{sx:{py:3},children:o.jsx(ct,{files:c,setFiles:l,setUploadFiles:f})}),o.jsx(k,{}),o.jsxs(ut,{sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:[o.jsx(en,{}),c.length>0&&o.jsxs(A,{variant:"contained",color:"success",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},onClick:()=>a(),children:["Embed",t&&o.jsxs(b,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px"},color:"common.white",children:[" ",o.jsx(dt,{style:{height:"20px",width:"20px"},color:"inherit"})]})]})]})]})})},nn=({botId:i})=>{U(),T();const s=Ce(),c=I(t=>t.auth.admin),l=I(t=>t.common.refresh),[g,f]=M.useState(0),[h,p]=M.useState([]),e=M.useCallback(async(t,n)=>{if(i)try{const r=await mt.getUserWithGranted({customerId:c.customerId,botId:i,pagination:{pageNumber:t.pageNumber,pageSize:t.pageSize}});s()&&(p(r.content),f(r.totalElements))}catch(r){console.error(r)}else p([])},[s,l,i]);return o.jsxs(Y,{sx:{width:"100%"},children:[o.jsx(W,{titleTypographyProps:{variant:"h4"},title:"Danh sách người dùng được truy cập Bot"}),o.jsx(k,{}),o.jsx(Z,{children:o.jsx(gt,{totalCount:g,users:h,botId:i,fetchData:e})})]})},an=()=>{T(),U();const i=Ce(),{id:s}=q(),[c,l]=M.useState({}),[g,f]=M.useState([]),h=I(r=>r.auth.admin);I(r=>r.common.loading);const p=I(r=>r.common.refresh),e=ve(),t=M.useCallback(async()=>{try{const r=await pt.getBot({botId:s});i()&&l(r)}catch(r){console.error(r)}},[s,i]);M.useEffect(()=>{let r=null;return r=setInterval(()=>{t()},5e3),()=>clearInterval(r)},[c,p]);const n=async()=>{try{const r=await vt({botId:s,customerId:h.customerId});f(r)}catch(r){console.error("Error fetching user files:",r)}};return M.useEffect(()=>{e(Q(!0));try{t(),n()}catch(r){console.error("Error",r)}finally{e(Q(!1))}},[s,p]),o.jsx(o.Fragment,{children:o.jsx(b,{px:{xs:2,sm:3},pt:{xs:2,sm:3},component:"main",flex:1,display:"flex",flexDirection:"column",children:o.jsxs(xt,{disableGutters:!0,maxWidth:"xl",children:[o.jsx(b,{children:o.jsxs(H,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:[o.jsx(It,{data:c}),o.jsx(tn,{onEmbed:()=>n()})]})}),o.jsx(b,{pt:{xs:2,sm:3},children:o.jsx(H,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:o.jsx(Xt,{tableData:g})})}),o.jsx(b,{pt:{xs:2,sm:3},children:o.jsx(H,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:o.jsx(nn,{botId:s})})})]})})})};export{an as default};
