import{J as Q,b as S,aG as y,g as X,r as d,a as A,j as e,c as q,B as j,S as I,R as P,T as c,X as G,q as k,Y as J,E as D,Z as Y,aN as w,aR as z,H as B,D as Z,a4 as K,a5 as ee,a6 as ne,a7 as W,a8 as a,a9 as te,bm as ae,bk as se,Q as ie,ag as re,u as oe,al as le,am as ce,aU as de,C as ue,P as he,A as me,bo as xe,bp as pe,d as ge}from"./index-e5JuFKv_.js";import"./create-chatbot-dialog-m9l9zpQg.js";import{d as je}from"./LaunchTwoTone-9XUthF5c.js";import{D as be}from"./DeleteRounded-HAD2WKtJ.js";import"./upload-icon-chatbot-KqrSg7wg.js";const ve=Q(S)(({theme:s,color:t})=>{const i=t?s.palette[t].main:s.palette.primary.main;return{backgroundColor:y(i,.08),color:i,"&:hover":{backgroundColor:y(i,.12),color:i},"&:disabled":{backgroundColor:y(s.palette.action.disabledBackground,.3)}}}),Se=(s,t,i)=>s.filter(r=>{let u=!0;return t.invoiceNumber&&(r.invoiceNumber.toLowerCase().includes(t.invoiceNumber.toLowerCase())||(u=!1)),Object.keys(i).forEach(p=>{const h=i[p];h&&r[p]!==h&&(u=!1)}),u}),Ce=(s,t,i)=>s.slice(t*i,t*i+i),f=({invoices:s})=>{const[t,i]=d.useState([]),{t:r}=A(),[u,p]=d.useState(0),[h,b]=d.useState(6),[m,x]=d.useState({invoiceNumber:""}),[C,R]=d.useState({invoiceStatus:null,paymentStatus:null}),F=[{id:"all",name:"Tất cả"},{id:"unsynced",name:"Chưa đồng bộ"},{id:"synced",name:"Đã đồng bộ"}],O=[{id:"all",name:"Tất cả"},{id:"unpaid",name:"Chưa thanh toán"},{id:"paid",name:"Đã thanh toán"}],V=n=>o=>{x(l=>({...l,[n]:o.target.value}))},N=n=>o=>{let l=null;o.target.value!=="all"&&(l=o.target.value),R(g=>({...g,[n]:l}))},_=n=>{i(n.target.checked?s.map(o=>o.id):[])},H=(n,o)=>{t.includes(o)?i(l=>l.filter(g=>g!==o)):i(l=>[...l,o])},M=(n,o)=>{p(o)},U=n=>{b(parseInt(n.target.value))},T=Se(s,m,C),v=Ce(T,u,h),E=t.length>0,L=t.length>0&&t.length<s.length,$=t.length===s.length;return e.jsx(e.Fragment,{children:e.jsxs(q,{children:[e.jsxs(j,{py:2,pl:1,pr:2,display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(I,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(P,{checked:$,indeterminate:L,onChange:_,disabled:v.length===0}),E?e.jsx(ve,{color:"error",variant:"contained",size:"small",startIcon:e.jsx(be,{}),children:"Delete selected"}):e.jsx(e.Fragment,{children:e.jsxs(j,{children:[e.jsxs(c,{sx:{display:{xs:"none",md:"inline-flex"}},component:"span",variant:"subtitle1",children:[r("Hiển thị"),":"]})," ",e.jsx("b",{children:v.length})," ",e.jsx("b",{children:r("hóa đơn")})]})})]}),e.jsxs(I,{direction:"row",spacing:1,children:[e.jsx(G,{size:"small",placeholder:"Số hóa đơn",value:m.invoiceNumber,onChange:V("invoiceNumber"),variant:"outlined",InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(J,{})}),endAdornment:m.invoiceNumber&&e.jsx(k,{sx:{mr:-.7},position:"end",children:e.jsx(D,{color:"error","aria-label":"clear input",onClick:()=>x(n=>({...n,invoiceNumber:""})),edge:"end",size:"small",sx:{color:"error.main"},children:e.jsx(Y,{fontSize:"small"})})})}}),e.jsx(w,{size:"small",variant:"outlined",children:e.jsx(z,{value:C.invoiceStatus||"all",onChange:N("invoiceStatus"),label:"",children:F.map(n=>e.jsx(B,{value:n.id,children:n.name},n.id))})}),e.jsx(w,{size:"small",variant:"outlined",children:e.jsx(z,{value:C.paymentStatus||"all",onChange:N("paymentStatus"),label:"",children:O.map(n=>e.jsx(B,{value:n.id,children:n.name},n.id))})}),e.jsx(S,{variant:"contained",color:"primary",size:"small",children:"Tìm kiếm"})]})]}),e.jsx(Z,{}),v.length===0?e.jsx(c,{sx:{py:{xs:2,sm:3,md:6,lg:10}},variant:"h3",color:"text.secondary",fontWeight:500,align:"center",children:r("We couldn't find any invoices matching your search criteria")}):e.jsxs(e.Fragment,{children:[e.jsx(K,{children:e.jsxs(ee,{children:[e.jsx(ne,{children:e.jsxs(W,{children:[e.jsx(a,{children:r("#")}),e.jsx(a,{children:r("Số hóa đơn")}),e.jsx(a,{children:r("Tên khách hàng")}),e.jsx(a,{children:r("Mã khách hàng")}),e.jsx(a,{children:r("Số hợp đồng")}),e.jsx(a,{children:r("Số tiền thanh toán")}),e.jsx(a,{children:r("Trạng thái hóa đơn")}),e.jsx(a,{children:r("Trạng thái thanh toán")}),e.jsx(a,{children:r("Ngày tạo")}),e.jsx(a,{align:"center",children:r("Hành động")})]})}),e.jsx(te,{children:v.map((n,o)=>{const l=t.includes(n.id);return e.jsxs(W,{hover:!0,selected:l,children:[e.jsx(a,{children:e.jsx(P,{checked:l,onChange:g=>H(g,n.id),value:l})}),e.jsx(a,{children:e.jsx(c,{noWrap:!0,variant:"subtitle2",children:n.invoiceNumber})}),e.jsx(a,{children:e.jsx(c,{noWrap:!0,variant:"subtitle2",children:n.customerName})}),e.jsx(a,{children:e.jsx(c,{noWrap:!0,variant:"subtitle2",children:n.customerCode})}),e.jsx(a,{children:e.jsx(c,{noWrap:!0,variant:"subtitle2",children:n.contractNumber})}),e.jsx(a,{children:e.jsx(c,{variant:"h6",fontWeight:600,children:ae(n.amount).format("0,0")})}),e.jsx(a,{children:e.jsx(c,{noWrap:!0,variant:"subtitle2",children:n.invoiceStatus==="unsynced"?"Chưa đồng bộ":"Đã đồng bộ"})}),e.jsx(a,{children:e.jsx(c,{noWrap:!0,variant:"subtitle2",children:n.paymentStatus==="unpaid"?"Chưa thanh toán":"Đã thanh toán"})}),e.jsx(a,{children:e.jsx(c,{noWrap:!0,variant:"subtitle2",children:se(new Date(n.creationDate),"dd/MM/yyyy")})}),e.jsx(a,{align:"center",children:e.jsx(c,{noWrap:!0,children:e.jsx(ie,{title:r("Xem"),arrow:!0,children:e.jsx(D,{color:"primary",onClick:()=>console.log("Sửa",n.id),children:e.jsx(je,{fontSize:"small"})})})})})]},n.id)})})]})}),e.jsx(j,{p:2,sx:{".MuiTablePagination-select":{py:.55}},children:e.jsx(re,{component:"div",count:T.length,onPageChange:M,onRowsPerPageChange:U,page:u,rowsPerPage:h,rowsPerPageOptions:[6,9,15],labelRowsPerPage:"Số hàng mỗi trang",slotProps:{select:{variant:"outlined",size:"small",sx:{p:0}}}})})]})]})})};f.propTypes={invoices:X.array.isRequired};f.defaultProps={invoices:[]};const ye=[{id:"1",invoiceNumber:"INV-001",customerName:"Nguyen Van A",customerCode:"CUST-001",contractNumber:"CON-001",amount:"1500000",invoiceStatus:"synced",paymentStatus:"paid",creationDate:"2023-05-15"},{id:"2",invoiceNumber:"INV-002",customerName:"Tran Thi B",customerCode:"CUST-002",contractNumber:"CON-002",amount:"2000000",invoiceStatus:"unsynced",paymentStatus:"unpaid",creationDate:"2023-05-20"},{id:"3",invoiceNumber:"INV-003",customerName:"Le Van C",customerCode:"CUST-003",contractNumber:"CON-003",amount:"1000000",invoiceStatus:"synced",paymentStatus:"unpaid",creationDate:"2023-06-01"},{id:"4",invoiceNumber:"INV-004",customerName:"Pham Thi D",customerCode:"CUST-004",contractNumber:"CON-004",amount:"2500000",invoiceStatus:"unsynced",paymentStatus:"paid",creationDate:"2023-06-05"},{id:"5",invoiceNumber:"INV-005",customerName:"Do Van E",customerCode:"CUST-005",contractNumber:"CON-005",amount:"3000000",invoiceStatus:"synced",paymentStatus:"paid",creationDate:"2023-06-10"},{id:"6",invoiceNumber:"INV-006",customerName:"Hoang Thi F",customerCode:"CUST-006",contractNumber:"CON-006",amount:"1800000",invoiceStatus:"unsynced",paymentStatus:"unpaid",creationDate:"2023-06-12"}],ke=()=>{const s=oe(),{t}=A(),i=le();ce();const[r,u]=d.useState([]),[p,h]=d.useState(!1),b=()=>{h(!0)},m=d.useCallback(async()=>{try{const x=await de.getBots({pageNumber:0,pageSize:20});i()&&u(x)}catch(x){console.error(x)}},[i]);return d.useEffect(()=>{m()},[m]),e.jsx(e.Fragment,{children:e.jsx(j,{px:{xs:2,sm:3},pt:{xs:2,sm:3},component:"main",flex:1,display:"flex",flexDirection:"column",children:e.jsxs(ue,{disableGutters:!0,maxWidth:"xl",children:[e.jsx(j,{pb:{xs:2,sm:3},children:e.jsx(he,{sx:{px:0},title:t("Hóa đơn"),description:t("Quản lý hóa đơn"),iconBox:e.jsx(me,{isSoft:!0,variant:"rounded",state:"primary",sx:{height:s.spacing(7),width:s.spacing(7),svg:{height:s.spacing(4),width:s.spacing(4),minWidth:s.spacing(4)}},children:e.jsx(xe,{})}),actions:e.jsxs("div",{children:[e.jsx(S,{sx:{mt:{xs:2,md:0},mr:1},variant:"contained",onClick:b,startIcon:e.jsx(pe,{fontSize:"small"}),children:t("Đồng bộ")}),e.jsx(S,{sx:{mt:{xs:2,md:0}},variant:"contained",onClick:b,startIcon:e.jsx(ge,{fontSize:"small"}),children:t("Xuất file")})]})})}),e.jsx(f,{invoices:ye})]})})})};export{ke as default};
