import{aV as me,aW as ze,aX as Fe,aY as Ue,aZ as Q,a_ as $e,a$ as le,b0 as He,b1 as Qe,f as F,i as U,j as s,u as k,a as $,k as N,c as H,b2 as Y,R as V,W,D as L,B as b,ab as ge,T as y,ac as We,r as E,e as G,a5 as Xe,a6 as Ye,a7 as Ge,a8 as ce,a9 as R,aa as Ke,b3 as pe,ag as Ve,E as de,aH as I,aT as qe,b4 as Ze,ah as Je,L as xe,S,b as A,b5 as et,b6 as tt,K as nt,b7 as _,aM as rt,aN as st,aQ as ot,aR as at,b8 as q,b9 as it,ba as lt,bb as ct,A as dt,bc as ut,bd as ht,be as ft,aI as mt,aJ as gt,bf as pt,aK as xt,bg as vt,bh as Ct,bi as jt,bj as Et,bk as bt,am as ve,bl as yt,bm as Mt,h as wt,aU as _t,y as ue,o as Rt,C as It,bn as At}from"./index-ZuSSZPzH.js";import{B as Pt}from"./bot-peL2xriC.js";import{d as St}from"./LaunchTwoTone-SIj3Gq8R.js";function Nt(i){return me({},i)}var he=1440,Dt=2520,K=43200,Tt=86400;function Lt(i,o,c){var l,m;ze(2,arguments);var h=Qe(),d=(l=(m=c==null?void 0:c.locale)!==null&&m!==void 0?m:h.locale)!==null&&l!==void 0?l:Fe;if(!d.formatDistance)throw new RangeError("locale must contain formatDistance property");var p=Ue(i,o);if(isNaN(p))throw new RangeError("Invalid time value");var e=me(Nt(c),{addSuffix:!!(c!=null&&c.addSuffix),comparison:p}),n,t;p>0?(n=Q(o),t=Q(i)):(n=Q(i),t=Q(o));var r=$e(t,n),a=(le(t)-le(n))/1e3,u=Math.round((r-a)/60),f;if(u<2)return c!=null&&c.includeSeconds?r<5?d.formatDistance("lessThanXSeconds",5,e):r<10?d.formatDistance("lessThanXSeconds",10,e):r<20?d.formatDistance("lessThanXSeconds",20,e):r<40?d.formatDistance("halfAMinute",0,e):r<60?d.formatDistance("lessThanXMinutes",1,e):d.formatDistance("xMinutes",1,e):u===0?d.formatDistance("lessThanXMinutes",1,e):d.formatDistance("xMinutes",u,e);if(u<45)return d.formatDistance("xMinutes",u,e);if(u<90)return d.formatDistance("aboutXHours",1,e);if(u<he){var C=Math.round(u/60);return d.formatDistance("aboutXHours",C,e)}else{if(u<Dt)return d.formatDistance("xDays",1,e);if(u<K){var x=Math.round(u/he);return d.formatDistance("xDays",x,e)}else if(u<Tt)return f=Math.round(u/K),d.formatDistance("aboutXMonths",f,e)}if(f=He(t,n),f<12){var w=Math.round(u/K);return d.formatDistance("xMonths",w,e)}else{var v=f%12,g=Math.floor(f/12);return v<3?d.formatDistance("aboutXYears",g,e):v<9?d.formatDistance("overXYears",g,e):d.formatDistance("almostXYears",g+1,e)}}var Z={},kt=U;Object.defineProperty(Z,"__esModule",{value:!0});var Ce=Z.default=void 0,Bt=kt(F()),Ot=s,zt=(0,Bt.default)((0,Ot.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined");Ce=Z.default=zt;const Ft=({data:i})=>{var m;k();const{t:o}=$(),{knowledges:c}=N(h=>h.knowledge),l=h=>{const d=Pt[h];return s.jsx(We,{style:{maxWidth:"80%"},color:d==null?void 0:d.color,label:d==null?void 0:d.label})};return s.jsxs(H,{sx:{width:"650px"},children:[s.jsx(Y,{titleTypographyProps:{variant:"h4"},title:"Thông tin Bot",action:s.jsx(V,{arrow:!0,placement:"top",title:o("Sửa thông tin bot"),children:s.jsx(W,{color:"primary",children:s.jsx(Ce,{})})})}),s.jsx(L,{}),s.jsxs(b,{textAlign:"center",position:"relative",p:{xs:2,sm:3,md:6},children:[s.jsx(ge,{sx:{mx:"auto",mb:1.5,width:94,height:94},src:i==null?void 0:i.icon}),l(i==null?void 0:i.botStatus),s.jsx(y,{sx:{pt:2},variant:"h3",children:i==null?void 0:i.botName}),s.jsx(y,{variant:"subtitle1",color:"text.secondary",children:(m=c.find(h=>h.knowId===(i==null?void 0:i.knowId)))==null?void 0:m.knowName}),s.jsx(y,{sx:{pt:1},style:{fontSize:16},color:"text.secondary",children:i==null?void 0:i.botDescription})]})]})};var J={},Ut=U;Object.defineProperty(J,"__esModule",{value:!0});var je=J.default=void 0,$t=Ut(F()),Ht=s,Qt=(0,$t.default)((0,Ht.jsx)("path",{d:"M14.71 6.71a.9959.9959 0 0 0-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L10.83 12l3.88-3.88c.39-.39.38-1.03 0-1.41z"}),"ChevronLeftRounded");je=J.default=Qt;var ee={},Wt=U;Object.defineProperty(ee,"__esModule",{value:!0});var Ee=ee.default=void 0,Xt=Wt(F()),Yt=s,Gt=(0,Xt.default)((0,Yt.jsx)("path",{d:"M9.29 6.71c-.39.39-.39 1.02 0 1.41L13.17 12l-3.88 3.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z"}),"ChevronRightRounded");Ee=ee.default=Gt;var te={},Kt=U;Object.defineProperty(te,"__esModule",{value:!0});var be=te.default=void 0,Vt=Kt(F()),qt=s,Zt=(0,Vt.default)((0,qt.jsx)("path",{d:"M11.29 8.71 6.7 13.3c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.38-.39-1.02-.39-1.41 0z"}),"ExpandLessRounded");be=te.default=Zt;var ne={},Jt=U;Object.defineProperty(ne,"__esModule",{value:!0});var ye=ne.default=void 0,en=Jt(F()),tn=s,nn=(0,en.default)((0,tn.jsx)("path",{d:"M15.88 9.29 12 13.17 8.12 9.29a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z"}),"ExpandMoreRounded");ye=ne.default=nn;const rn=({tableData:i})=>{const{t:o}=$(),c=k(),[l,m]=E.useState({key:"dateCreated",direction:"ascending"}),[h,d]=E.useState(0),[p,e]=E.useState(3),n=(v,g)=>{d(g)},t=v=>{e(parseInt(v.target.value,10)),d(0)},r=(v,g)=>[...v].sort((j,M)=>j[g.key]<M[g.key]?g.direction==="ascending"?-1:1:j[g.key]>M[g.key]?g.direction==="ascending"?1:-1:0),a=v=>{let g="ascending";l.key===v&&l.direction==="ascending"&&(g="descending"),m({key:v,direction:g})},u=v=>l.key!==v?null:l.direction==="ascending"?s.jsx(ye,{sx:{color:"text.secondary"},fontSize:"small"}):s.jsx(be,{sx:{color:"text.secondary"},fontSize:"small"}),C=r(i,l).slice(h*p,h*p+p),x=async({fileKey:v,fileName:g})=>{try{await et({fileKey:v,fileName:g})}catch(j){console.error("Error fetching user files:",j)}},w=()=>{};return s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(Y,{titleTypographyProps:{variant:"h4"},title:"Lịch sử training dữ liệu"}),s.jsx(L,{}),s.jsxs(G,{children:[s.jsx(Xe,{children:s.jsxs(Ye,{children:[s.jsx(Ge,{children:s.jsxs(ce,{children:[s.jsx(R,{onClick:()=>a("filename"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Tên file")," ",u("filename")]})}),s.jsx(R,{onClick:()=>a("owner"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Người training")," ",u("owner")]})}),s.jsx(R,{onClick:()=>a("dateCreated"),children:s.jsxs(b,{sx:{cursor:"pointer"},display:"flex",alignItems:"center",children:[o("Ngày tạo")," ",u("dateCreated")]})}),s.jsx(R,{align:"right",children:o("Actions")})]})}),s.jsx(Ke,{children:C.map(v=>s.jsxs(ce,{hover:!0,children:[s.jsx(R,{children:s.jsxs(b,{display:"flex",alignItems:"center",children:[pe(v.fileName),s.jsx(y,{sx:{pl:1},variant:"h6",children:v.fileName})]})}),s.jsx(R,{children:s.jsxs(b,{display:"flex",alignItems:"center",children:[v.avatarUrl?s.jsx(ge,{src:v.avatarUrl,sx:{mr:1,height:28,width:28}}):null,s.jsx(Ve,{href:"",onClick:g=>g.preventDefault(),underline:"hover",variant:"h6",noWrap:!0,fontWeight:500,children:v.userId})]})}),s.jsx(R,{children:s.jsx(y,{variant:"h6",fontWeight:400,noWrap:!0,children:Lt(new Date(v.createDate),new Date,{addSuffix:!0})})}),s.jsxs(R,{sx:{whiteSpace:"nowrap"},align:"right",children:[s.jsx(V,{title:o("Xem"),arrow:!0,children:s.jsx(de,{sx:{"&:hover":{background:I(c.palette.primary.main,.08)},color:c.palette.primary.main},color:"inherit",size:"small",onClick:()=>x({fileKey:v==null?void 0:v.objectId,fileName:v==null?void 0:v.fileName}),children:s.jsx(St,{fontSize:"small"})})}),s.jsx(V,{title:o("Xóa"),arrow:!0,children:s.jsx(de,{sx:{"&:hover":{background:I(c.palette.error.main,.08)},color:c.palette.error.main},color:"inherit",size:"small",onClick:()=>w(),children:s.jsx(qe,{fontSize:"small"})})})]})]},v.id))})]})}),s.jsx(Ze,{sx:{p:2,".MuiTablePagination-toolbar":{justifyContent:"space-between"},".MuiTablePagination-spacer":{display:"none"}},children:s.jsx(Je,{component:"div",count:i.length,page:h,onPageChange:n,rowsPerPage:p,onRowsPerPageChange:t,rowsPerPageOptions:[3],ActionsComponent:sn})})]})]})},sn=({count:i,page:o,onPageChange:c})=>{const l=d=>{c(d,o-1)},m=d=>{c(d,o+1)},h=xe(d=>d.breakpoints.up("sm"));return s.jsx(S,{direction:"row",spacing:1,children:h?s.jsxs(s.Fragment,{children:[s.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:l,disabled:o===0,children:"Trang trước"}),s.jsx(A,{variant:"outlined",color:"secondary",size:"small",onClick:m,disabled:o>=Math.ceil(i/3)-1,children:"Trang sau"})]}):s.jsxs(s.Fragment,{children:[s.jsx(W,{variant:"outlined",color:"secondary",size:"small",onClick:l,disabled:o===0,startIcon:s.jsx(je,{})}),s.jsx(W,{variant:"outlined",color:"secondary",size:"small",onClick:m,disabled:o>=Math.ceil(i/3)-1,startIcon:s.jsx(Ee,{})})]})})},on=async i=>{try{return await tt("http://52.221.236.203:8085/bot-edge/api/v1/bot/embed/files",i)}catch(o){throw console.error("Error embed files:",o),o}};nt(A)(({theme:i})=>({background:I(i.palette.common.white,.08),color:I(i.palette.common.white,.9),borderColor:I(i.palette.common.white,.12),"&:hover":{background:I(i.palette.common.white,.1),color:i.palette.common.white},"&.MuiButton-outlined":{borderColor:I(i.palette.common.white,.12),"&:hover":{borderColor:I(i.palette.common.white,.16)}}}));var an=Object.defineProperty,X=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,fe=(i,o,c)=>o in i?an(i,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[o]=c,z=(i,o)=>{for(var c in o||(o={}))Me.call(o,c)&&fe(i,c,o[c]);if(X)for(var c of X(o))we.call(o,c)&&fe(i,c,o[c]);return i},re=(i,o)=>{var c={};for(var l in i)Me.call(i,l)&&o.indexOf(l)<0&&(c[l]=i[l]);if(i!=null&&X)for(var l of X(i))o.indexOf(l)<0&&we.call(i,l)&&(c[l]=i[l]);return c};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var D;(i=>{const o=class{constructor(e,n,t,r){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<o.MIN_VERSION||e>o.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let a=[];for(let f=0;f<this.size;f++)a.push(!1);for(let f=0;f<this.size;f++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const u=this.addEccAndInterleave(t);if(this.drawCodewords(u),r==-1){let f=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const x=this.getPenaltyScore();x<f&&(r=C,f=x),this.applyMask(C)}}h(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,n){const t=i.QrSegment.makeSegments(e);return o.encodeSegments(t,n)}static encodeBinary(e,n){const t=i.QrSegment.makeBytes(e);return o.encodeSegments([t],n)}static encodeSegments(e,n,t=1,r=40,a=-1,u=!0){if(!(o.MIN_VERSION<=t&&t<=r&&r<=o.MAX_VERSION)||a<-1||a>7)throw new RangeError("Invalid value");let f,C;for(f=t;;f++){const g=o.getNumDataCodewords(f,n)*8,j=p.getTotalBits(e,f);if(j<=g){C=j;break}if(f>=r)throw new RangeError("Data too long")}for(const g of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])u&&C<=o.getNumDataCodewords(f,g)*8&&(n=g);let x=[];for(const g of e){l(g.mode.modeBits,4,x),l(g.numChars,g.mode.numCharCountBits(f),x);for(const j of g.getData())x.push(j)}h(x.length==C);const w=o.getNumDataCodewords(f,n)*8;h(x.length<=w),l(0,Math.min(4,w-x.length),x),l(0,(8-x.length%8)%8,x),h(x.length%8==0);for(let g=236;x.length<w;g^=253)l(g,8,x);let v=[];for(;v.length*8<x.length;)v.push(0);return x.forEach((g,j)=>v[j>>>3]|=g<<7-(j&7)),new o(f,n,v,a)}getModule(e,n){return 0<=e&&e<this.size&&0<=n&&n<this.size&&this.modules[n][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),n=e.length;for(let t=0;t<n;t++)for(let r=0;r<n;r++)t==0&&r==0||t==0&&r==n-1||t==n-1&&r==0||this.drawAlignmentPattern(e[t],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const n=this.errorCorrectionLevel.formatBits<<3|e;let t=n;for(let a=0;a<10;a++)t=t<<1^(t>>>9)*1335;const r=(n<<10|t)^21522;h(r>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,m(r,a));this.setFunctionModule(8,7,m(r,6)),this.setFunctionModule(8,8,m(r,7)),this.setFunctionModule(7,8,m(r,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,m(r,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,m(r,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,m(r,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;const n=this.version<<12|e;h(n>>>18==0);for(let t=0;t<18;t++){const r=m(n,t),a=this.size-11+t%3,u=Math.floor(t/3);this.setFunctionModule(a,u,r),this.setFunctionModule(u,a,r)}}drawFinderPattern(e,n){for(let t=-4;t<=4;t++)for(let r=-4;r<=4;r++){const a=Math.max(Math.abs(r),Math.abs(t)),u=e+r,f=n+t;0<=u&&u<this.size&&0<=f&&f<this.size&&this.setFunctionModule(u,f,a!=2&&a!=4)}}drawAlignmentPattern(e,n){for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,n+t,Math.max(Math.abs(r),Math.abs(t))!=1)}setFunctionModule(e,n,t){this.modules[n][e]=t,this.isFunction[n][e]=!0}addEccAndInterleave(e){const n=this.version,t=this.errorCorrectionLevel;if(e.length!=o.getNumDataCodewords(n,t))throw new RangeError("Invalid argument");const r=o.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][n],a=o.ECC_CODEWORDS_PER_BLOCK[t.ordinal][n],u=Math.floor(o.getNumRawDataModules(n)/8),f=r-u%r,C=Math.floor(u/r);let x=[];const w=o.reedSolomonComputeDivisor(a);for(let g=0,j=0;g<r;g++){let M=e.slice(j,j+C-a+(g<f?0:1));j+=M.length;const B=o.reedSolomonComputeRemainder(M,w);g<f&&M.push(0),x.push(M.concat(B))}let v=[];for(let g=0;g<x[0].length;g++)x.forEach((j,M)=>{(g!=C-a||M>=f)&&v.push(j[g])});return h(v.length==u),v}drawCodewords(e){if(e.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){t==6&&(t=5);for(let r=0;r<this.size;r++)for(let a=0;a<2;a++){const u=t-a,C=(t+1&2)==0?this.size-1-r:r;!this.isFunction[C][u]&&n<e.length*8&&(this.modules[C][u]=m(e[n>>>3],7-(n&7)),n++)}}h(n==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let t=0;t<this.size;t++){let r;switch(e){case 0:r=(t+n)%2==0;break;case 1:r=n%2==0;break;case 2:r=t%3==0;break;case 3:r=(t+n)%3==0;break;case 4:r=(Math.floor(t/3)+Math.floor(n/2))%2==0;break;case 5:r=t*n%2+t*n%3==0;break;case 6:r=(t*n%2+t*n%3)%2==0;break;case 7:r=((t+n)%2+t*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][t]&&r&&(this.modules[n][t]=!this.modules[n][t])}}getPenaltyScore(){let e=0;for(let a=0;a<this.size;a++){let u=!1,f=0,C=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[a][x]==u?(f++,f==5?e+=o.PENALTY_N1:f>5&&e++):(this.finderPenaltyAddHistory(f,C),u||(e+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),u=this.modules[a][x],f=1);e+=this.finderPenaltyTerminateAndCount(u,f,C)*o.PENALTY_N3}for(let a=0;a<this.size;a++){let u=!1,f=0,C=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[x][a]==u?(f++,f==5?e+=o.PENALTY_N1:f>5&&e++):(this.finderPenaltyAddHistory(f,C),u||(e+=this.finderPenaltyCountPatterns(C)*o.PENALTY_N3),u=this.modules[x][a],f=1);e+=this.finderPenaltyTerminateAndCount(u,f,C)*o.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let u=0;u<this.size-1;u++){const f=this.modules[a][u];f==this.modules[a][u+1]&&f==this.modules[a+1][u]&&f==this.modules[a+1][u+1]&&(e+=o.PENALTY_N2)}let n=0;for(const a of this.modules)n=a.reduce((u,f)=>u+(f?1:0),n);const t=this.size*this.size,r=Math.ceil(Math.abs(n*20-t*10)/t)-1;return h(0<=r&&r<=9),e+=r*o.PENALTY_N4,h(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,n=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let t=[6];for(let r=this.size-7;t.length<e;r-=n)t.splice(1,0,r);return t}}static getNumRawDataModules(e){if(e<o.MIN_VERSION||e>o.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return h(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(o.getNumRawDataModules(e)/8)-o.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*o.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let r=0;r<e-1;r++)n.push(0);n.push(1);let t=1;for(let r=0;r<e;r++){for(let a=0;a<n.length;a++)n[a]=o.reedSolomonMultiply(n[a],t),a+1<n.length&&(n[a]^=n[a+1]);t=o.reedSolomonMultiply(t,2)}return n}static reedSolomonComputeRemainder(e,n){let t=n.map(r=>0);for(const r of e){const a=r^t.shift();t.push(0),n.forEach((u,f)=>t[f]^=o.reedSolomonMultiply(u,a))}return t}static reedSolomonMultiply(e,n){if(e>>>8||n>>>8)throw new RangeError("Byte out of range");let t=0;for(let r=7;r>=0;r--)t=t<<1^(t>>>7)*285,t^=(n>>>r&1)*e;return h(t>>>8==0),t}finderPenaltyCountPatterns(e){const n=e[1];h(n<=this.size*3);const t=n>0&&e[2]==n&&e[3]==n*3&&e[4]==n&&e[5]==n;return(t&&e[0]>=n*4&&e[6]>=n?1:0)+(t&&e[6]>=n*4&&e[0]>=n?1:0)}finderPenaltyTerminateAndCount(e,n,t){return e&&(this.finderPenaltyAddHistory(n,t),n=0),n+=this.size,this.finderPenaltyAddHistory(n,t),this.finderPenaltyCountPatterns(t)}finderPenaltyAddHistory(e,n){n[0]==0&&(e+=this.size),n.pop(),n.unshift(e)}};let c=o;c.MIN_VERSION=1,c.MAX_VERSION=40,c.PENALTY_N1=3,c.PENALTY_N2=3,c.PENALTY_N3=40,c.PENALTY_N4=10,c.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],c.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=c;function l(e,n,t){if(n<0||n>31||e>>>n)throw new RangeError("Value out of range");for(let r=n-1;r>=0;r--)t.push(e>>>r&1)}function m(e,n){return(e>>>n&1)!=0}function h(e){if(!e)throw new Error("Assertion error")}const d=class{constructor(e,n,t){if(this.mode=e,this.numChars=n,this.bitData=t,n<0)throw new RangeError("Invalid argument");this.bitData=t.slice()}static makeBytes(e){let n=[];for(const t of e)l(t,8,n);return new d(d.Mode.BYTE,e.length,n)}static makeNumeric(e){if(!d.isNumeric(e))throw new RangeError("String contains non-numeric characters");let n=[];for(let t=0;t<e.length;){const r=Math.min(e.length-t,3);l(parseInt(e.substr(t,r),10),r*3+1,n),t+=r}return new d(d.Mode.NUMERIC,e.length,n)}static makeAlphanumeric(e){if(!d.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n=[],t;for(t=0;t+2<=e.length;t+=2){let r=d.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t))*45;r+=d.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),l(r,11,n)}return t<e.length&&l(d.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,n),new d(d.Mode.ALPHANUMERIC,e.length,n)}static makeSegments(e){return e==""?[]:d.isNumeric(e)?[d.makeNumeric(e)]:d.isAlphanumeric(e)?[d.makeAlphanumeric(e)]:[d.makeBytes(d.toUtf8ByteArray(e))]}static makeEci(e){let n=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)l(e,8,n);else if(e<16384)l(2,2,n),l(e,14,n);else if(e<1e6)l(6,3,n),l(e,21,n);else throw new RangeError("ECI assignment value out of range");return new d(d.Mode.ECI,0,n)}static isNumeric(e){return d.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return d.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,n){let t=0;for(const r of e){const a=r.mode.numCharCountBits(n);if(r.numChars>=1<<a)return 1/0;t+=4+a+r.bitData.length}return t}static toUtf8ByteArray(e){e=encodeURI(e);let n=[];for(let t=0;t<e.length;t++)e.charAt(t)!="%"?n.push(e.charCodeAt(t)):(n.push(parseInt(e.substr(t+1,2),16)),t+=2);return n}};let p=d;p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=p})(D||(D={}));(i=>{(o=>{const c=class{constructor(m,h){this.ordinal=m,this.formatBits=h}};let l=c;l.LOW=new c(0,1),l.MEDIUM=new c(1,0),l.QUARTILE=new c(2,3),l.HIGH=new c(3,2),o.Ecc=l})(i.QrCode||(i.QrCode={}))})(D||(D={}));(i=>{(o=>{const c=class{constructor(m,h){this.modeBits=m,this.numBitsCharCount=h}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};let l=c;l.NUMERIC=new c(1,[10,12,14]),l.ALPHANUMERIC=new c(2,[9,11,13]),l.BYTE=new c(4,[8,16,16]),l.KANJI=new c(8,[8,10,12]),l.ECI=new c(7,[0,0,0]),o.Mode=l})(i.QrSegment||(i.QrSegment={}))})(D||(D={}));var T=D;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var _e={L:T.QrCode.Ecc.LOW,M:T.QrCode.Ecc.MEDIUM,Q:T.QrCode.Ecc.QUARTILE,H:T.QrCode.Ecc.HIGH},Re=128,Ie="L",Ae="#FFFFFF",Pe="#000000",Se=!1,se=4,ln=.1;function Ne(i,o=0){const c=[];return i.forEach(function(l,m){let h=null;l.forEach(function(d,p){if(!d&&h!==null){c.push(`M${h+o} ${m+o}h${p-h}v1H${h+o}z`),h=null;return}if(p===l.length-1){if(!d)return;h===null?c.push(`M${p+o},${m+o} h1v1H${p+o}z`):c.push(`M${h+o},${m+o} h${p+1-h}v1H${h+o}z`);return}d&&h===null&&(h=p)})}),c.join("")}function De(i,o){return i.slice().map((c,l)=>l<o.y||l>=o.y+o.h?c:c.map((m,h)=>h<o.x||h>=o.x+o.w?m:!1))}function Te(i,o,c,l){if(l==null)return null;const m=c?se:0,h=i.length+m*2,d=Math.floor(o*ln),p=h/o,e=(l.width||d)*p,n=(l.height||d)*p,t=l.x==null?i.length/2-e/2:l.x*p,r=l.y==null?i.length/2-n/2:l.y*p;let a=null;if(l.excavate){let u=Math.floor(t),f=Math.floor(r),C=Math.ceil(e+t-u),x=Math.ceil(n+r-f);a={x:u,y:f,w:C,h:x}}return{x:t,y:r,h:n,w:e,excavation:a}}var cn=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function dn(i){const o=i,{value:c,size:l=Re,level:m=Ie,bgColor:h=Ae,fgColor:d=Pe,includeMargin:p=Se,style:e,imageSettings:n}=o,t=re(o,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),r=n==null?void 0:n.src,a=E.useRef(null),u=E.useRef(null),[f,C]=E.useState(!1);E.useEffect(()=>{if(a.current!=null){const v=a.current,g=v.getContext("2d");if(!g)return;let j=T.QrCode.encodeText(c,_e[m]).getModules();const M=p?se:0,B=j.length+M*2,P=Te(j,l,p,n),O=u.current,oe=P!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;oe&&P.excavation!=null&&(j=De(j,P.excavation));const ae=window.devicePixelRatio||1;v.height=v.width=l*ae;const ie=l/B*ae;g.scale(ie,ie),g.fillStyle=h,g.fillRect(0,0,B,B),g.fillStyle=d,cn?g.fill(new Path2D(Ne(j,M))):j.forEach(function(Le,ke){Le.forEach(function(Be,Oe){Be&&g.fillRect(Oe+M,ke+M,1,1)})}),oe&&g.drawImage(O,P.x+M,P.y+M,P.w,P.h)}}),E.useEffect(()=>{C(!1)},[r]);const x=z({height:l,width:l},e);let w=null;return r!=null&&(w=_.createElement("img",{src:r,key:r,style:{display:"none"},onLoad:()=>{C(!0)},ref:u})),_.createElement(_.Fragment,null,_.createElement("canvas",z({style:x,height:l,width:l,ref:a},t)),w)}function un(i){const o=i,{value:c,size:l=Re,level:m=Ie,bgColor:h=Ae,fgColor:d=Pe,includeMargin:p=Se,imageSettings:e}=o,n=re(o,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let t=T.QrCode.encodeText(c,_e[m]).getModules();const r=p?se:0,a=t.length+r*2,u=Te(t,l,p,e);let f=null;e!=null&&u!=null&&(u.excavation!=null&&(t=De(t,u.excavation)),f=_.createElement("image",{xlinkHref:e.src,height:u.h,width:u.w,x:u.x+r,y:u.y+r,preserveAspectRatio:"none"}));const C=Ne(t,r);return _.createElement("svg",z({height:l,width:l,viewBox:`0 0 ${a} ${a}`},n),_.createElement("path",{fill:h,d:`M0,0 h${a}v${a}H0z`,shapeRendering:"crispEdges"}),_.createElement("path",{fill:d,d:C,shapeRendering:"crispEdges"}),f)}var hn=i=>{const o=i,{renderAs:c}=o,l=re(o,["renderAs"]);return c==="svg"?_.createElement(un,z({},l)):_.createElement(dn,z({},l))};const fn=()=>{const i=k(),o=xe(i.breakpoints.down("sm")),[c,l]=E.useState(!1),m=()=>{l(!0)},h=()=>{l(!1)},p={bankName:"Ngân hàng X",accountNumber:"123456789",paymentAmount:"500,000 VNĐ",invoiceNumber:"123456"};return s.jsxs(s.Fragment,{children:[s.jsx(A,{variant:"contained",color:"success",onClick:()=>m(),children:"Payment"}),s.jsxs(rt,{fullScreen:o,open:c,onClose:h,"aria-labelledby":"basic-dialog-title",maxWidth:"xs",fullWidth:!0,children:[s.jsx(st,{id:"basic-dialog-title",children:"Thanh toán"}),s.jsxs(ot,{children:[s.jsx(y,{variant:"h6",children:"Thông tin phí"}),s.jsx(y,{children:"Số file / dung lượng nạp: 10 files / 500MB"}),s.jsx(y,{children:"Phí chi trả: 500,000 VNĐ"}),s.jsx(y,{variant:"h6",style:{marginTop:"20px"},children:"Mã QR"}),s.jsx(b,{display:"flex",justifyContent:"center",style:{margin:"20px"},children:s.jsx(hn,{value:`bank:${p.bankName};account:${p.accountNumber};amount:${p.paymentAmount};invoice:${p.invoiceNumber}`,size:300})}),s.jsxs(y,{children:["- Phí cần thanh toán: ",p.paymentAmount]}),s.jsxs(y,{children:["- Nội dung chuyển khoản: Số hóa đơn ",p.invoiceNumber]}),s.jsx(y,{variant:"body2",children:"Chú ý: Nội dung chuyển khoản bắt buộc chứa Số hóa đơn"})]}),s.jsxs(at,{children:[s.jsx(A,{onClick:h,color:"primary",children:"Quay lại"}),s.jsx(A,{onClick:h,color:"primary",children:"Tiếp tục"})]})]})]})},mn=(i,o=2)=>{if(i===0)return"0 Bytes";const c=1024,l=o<0?0:o,m=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],h=Math.floor(Math.log(i)/Math.log(c));return parseFloat((i/Math.pow(c,h)).toFixed(l))+" "+m[h]},gn=({files:i,setFiles:o})=>{const[c,l]=E.useState({});N(t=>t.auth.admin),q();const m=E.useCallback(t=>{t.forEach(r=>{l(a=>({...a,[r.name]:{progress:0}}))}),o(r=>[...r,...t.map(a=>({file:a,progress:0}))]),t.forEach(r=>{(u=>{const f=setInterval(()=>{l(C=>{if(!C[u.name])return clearInterval(f),C;const x=C[u.name].progress,w=Math.min(x+10,100);return w===100&&clearInterval(f),{...C,[u.name]:{progress:w}}})},200)})(r)})},[]),{getRootProps:h,isDragActive:d,isDragAccept:p,isDragReject:e}=it({onDrop:m,accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/gif":[".gif"],"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxFiles:10}),n=t=>{o(r=>r.filter(({file:a})=>a.name!==t)),l(r=>{const a={...r};return delete a[t],a}),c[t]&&URL.revokeObjectURL(c[t].url)};return s.jsxs(s.Fragment,{children:[s.jsx(lt,{variant:"outlined",elevation:0,sx:{borderWidth:1},children:s.jsx(ct,{...h(),children:s.jsx(G,{children:s.jsxs(S,{spacing:1,justifyContent:"center",direction:"column",alignItems:"center",children:[s.jsxs(dt,{state:"secondary",isSoft:!0,variant:"rounded",sx:{borderWidth:1,borderStyle:"solid",borderColor:t=>t.palette.mode==="dark"?"neutral.800":"neutral.400",backgroundColor:"background.paper"},children:[e&&s.jsx(ut,{fontSize:"small",sx:{color:"error.main"}}),p&&s.jsx(ht,{fontSize:"small",sx:{color:"success.main"}}),!d&&s.jsx(ft,{fontSize:"small",sx:{color:"text.primary"}})]}),s.jsx(b,{children:s.jsxs(y,{textAlign:"center",variant:"h6",fontWeight:400,color:p?"success.main":e?"error.main":"text.secondary",children:[s.jsx(y,{variant:"h6",fontWeight:600,component:"span",color:p?"success.main":e?"error.main":"primary.main",children:"Nhấp để tải lên"})," ","hoặc kéo và thả tài liệu vào đây. Tối đa 10 tệp"]})})]})})})}),i&&i.length>0?s.jsx(mt,{component:"div",disablePadding:!0,children:s.jsx(S,{spacing:2,mt:2,children:i.map(({file:t})=>{var r,a;return s.jsx(H,{variant:"outlined",elevation:0,sx:{"&:hover":{borderColor:u=>u.palette.mode==="dark"?"neutral.800":"neutral.500"}},children:s.jsxs(gt,{component:"div",alignItems:"flex-start",children:[s.jsx(pt,{sx:{minWidth:38,color:"neutral.700"},children:pe(t.name)}),s.jsx(xt,{primary:s.jsxs(b,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",children:[s.jsxs(b,{overflow:"hidden",children:[s.jsx(y,{noWrap:!0,variant:"subtitle1",fontWeight:500,color:"text.primary",children:t.name}),s.jsx(y,{variant:"subtitle2",color:"text.secondary",children:mn(t.size)})]}),s.jsx(W,{"aria-label":"delete",onClick:()=>n(t.name),size:"small",color:"error",children:s.jsx(vt,{fontSize:"small"})})]}),disableTypography:!0,secondary:s.jsxs(b,{display:"flex",alignItems:"center",children:[s.jsx(b,{flex:1,children:s.jsx(Ct,{variant:"determinate",value:((r=c[t.name])==null?void 0:r.progress)||0})}),s.jsxs(y,{variant:"subtitle2",sx:{pl:.5},children:[((a=c[t.name])==null?void 0:a.progress)||0,"%"]})]})})]})},t.name)})})}):s.jsxs(S,{spacing:.5,justifyContent:"center",direction:"column",alignItems:"center",pt:3,pb:2,children:[s.jsxs(b,{textAlign:"center",children:[s.jsx(y,{variant:"h5",color:"text.primary",children:"Không có tệp nào được thêm vào"}),s.jsx(y,{color:"text.secondary",fontWeight:400,children:"Vui lòng tải lên các tài liệu cần thiết"})]}),s.jsx(b,{width:"100%",children:s.jsx(L,{flexItem:!0,sx:{my:1,mx:"auto",width:"55%"}})}),s.jsx(A,{startIcon:s.jsx(jt,{}),variant:"outlined",color:"secondary",size:"small",...h(),children:"Thêm tệp"})]})]})},pn=({onEmbed:i})=>{k(),$();const[o,c]=E.useState([]),[l,m]=E.useState([]);E.useState(!1);const h=N(n=>n.auth.admin),{id:d}=q(),p=async n=>{try{const t=await bt({file:n,botId:d,userId:h.id,isPublic:!1});return delete t.fileLink,t}catch(t){console.error("Error upload file:",t)}},e=async()=>{try{o.forEach(n=>{const t=p(n==null?void 0:n.file);m(r=>[...r,t])});try{const n={botId:d,sitemapUrls:[],sourceUrls:[],fileIds:l};console.log(n);const t=await on(n);console.log("Embed bot response:",t),c([]),m([]),i()}catch(n){console.error("Error embedding bot:",n)}}catch(n){console.error("Error upload file:",n)}};return s.jsx(s.Fragment,{children:s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(Y,{titleTypographyProps:{variant:"h4"},title:"Training dữ liệu Bot"}),s.jsx(L,{}),s.jsx(G,{sx:{py:3},children:s.jsx(gn,{files:o,setFiles:c,setUploadFiles:m})}),s.jsx(L,{}),s.jsxs(Et,{sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:[s.jsx(fn,{}),o.length>0&&s.jsx(A,{variant:"contained",color:"success",onClick:()=>e(),children:"Embed"})]})]})})},xn=({botId:i})=>{$(),k();const o=ve(),c=N(n=>n.auth.admin),l=N(n=>n.common.refresh),[m,h]=E.useState(0),[d,p]=E.useState([]),e=E.useCallback(async(n,t)=>{if(i)try{const r=await yt.getUserWithGranted({customerId:c.customerId,botId:i,pagination:{pageNumber:n.pageNumber,pageSize:n.pageSize}});o()&&(p(r.content),h(r.totalElements))}catch(r){console.error(r)}else p([])},[o,l,i]);return s.jsxs(H,{sx:{width:"100%"},children:[s.jsx(Y,{titleTypographyProps:{variant:"h4"},title:"Danh sách người dùng được truy cập Bot"}),s.jsx(L,{}),s.jsx(G,{children:s.jsx(Mt,{totalCount:m,users:d,botId:i,fetchData:e})})]})},En=()=>{k(),$();const i=ve(),{id:o}=q(),[c,l]=E.useState({}),[m,h]=E.useState([]),d=N(r=>r.auth.admin),p=N(r=>r.common.loading),e=wt(),n=E.useCallback(async()=>{try{const r=await _t.getBot({botId:o});i()&&l(r)}catch(r){console.error(r)}},[o,i]);E.useEffect(()=>{const r=setInterval(()=>{n()},3e3);return()=>clearInterval(r)},[]);const t=async()=>{try{const r=await At({botId:o,userId:d.id});h(r)}catch(r){console.error("Error fetching user files:",r)}};return E.useEffect(()=>{e(ue(!0));try{n(),t()}catch(r){console.error("Error",r)}finally{e(ue(!1))}},[o]),s.jsx(s.Fragment,{children:p?s.jsxs(b,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",height:"50vh"},color:"common.white",children:[" ",s.jsx(Rt,{style:{height:"30px",width:"30px"}})]}):s.jsx(b,{px:{xs:2,sm:3},pt:{xs:2,sm:3},component:"main",flex:1,display:"flex",flexDirection:"column",children:s.jsxs(It,{disableGutters:!0,maxWidth:"xl",children:[s.jsx(b,{children:s.jsxs(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:[s.jsx(Ft,{data:c}),s.jsx(pn,{onEmbed:()=>t()})]})}),s.jsx(b,{pt:{xs:2,sm:3},children:s.jsx(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:s.jsx(rn,{tableData:m})})}),s.jsx(b,{pt:{xs:2,sm:3},children:s.jsx(S,{spacing:{xs:2,sm:3},direction:{xs:"column",sm:"row"},children:s.jsx(xn,{botId:o})})})]})})})};export{En as default};
