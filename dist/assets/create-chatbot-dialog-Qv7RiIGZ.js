import{J as F,B as i,r as k,j as e,bp as N,bq as s,g,u as S,by as y,K as R,l as M,aL as E,aM as H,T as r,D as v,S as j,aP as L,G as o,aN as b,p as u,aO as C,aR as q,ab as z,bE as G,H as K,ac as O,aQ as P,b as I,t as Q,b7 as U}from"./index-YWLvuDMY.js";import{U as V}from"./upload-icon-chatbot-JunygnR9.js";const J=F(i)(()=>({display:"flex",alignItems:"center","& .MuiBadge-badge":{position:"static",transform:"none"}})),X=k.forwardRef(function(a,l){return e.jsx(N,{direction:"down",ref:l,...a})}),A=s.object({botName:s.string().min(1,"Tên bot là bắt buộc").max(500,"Tên bot tối đa 500 ký tự"),botDescription:s.string().max(500,"Mô tả bot tối đa 500 ký tự").optional(),icon:s.string().min(1,"Icon là bắt buộc"),field:s.array(s.string()).nonempty("Lĩnh vực là bắt buộc"),status:s.enum(["Hoạt động","Không hoạt động"]).default("Hoạt động")}),Y=({open:c,onClose:a,onUpdate:l})=>{const p=S(),d=y(t=>t.auth.admin),D=R(p.breakpoints.up("md")),{knowledges:f}=y(t=>t.knowledge),{control:h,handleSubmit:T,reset:m}=M({resolver:Q(A),defaultValues:{botName:"",botDescription:"",icon:"",field:[],status:"Hoạt động"}}),W=async t=>{try{await U("http://52.221.236.203:8085/bot-edge/api/v1/bot",{botName:t.botName,botDescription:t.botDescription,icon:t.icon,knowId:t.field[0],createUserId:d.id,customerId:d==null?void 0:d.customerId}),l==null||l(t),m(),a()}catch(n){console.error("Error creating bot:",n)}};return k.useEffect(()=>{c||m()},[c]),e.jsxs(E,{onClose:()=>{m(),a()},open:c,TransitionComponent:X,fullScreen:!D,scroll:"paper","aria-labelledby":"basic-dialog-title",maxWidth:"lg",fullWidth:!0,children:[e.jsx(H,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(i,{children:e.jsx(r,{variant:"h4",fontWeight:600,children:"Tạo bot mới"})})}),e.jsx(v,{}),e.jsx(j,{spacing:0,direction:"row",height:"100%",overflow:"hidden",children:e.jsx(L,{sx:{overflowX:"hidden",p:3},children:e.jsx(j,{spacing:{xs:2,sm:3},children:e.jsx(i,{children:e.jsxs(o,{container:!0,spacing:{xs:2,md:3},children:[e.jsx(o,{item:!0,xs:12,children:e.jsxs(b,{fullWidth:!0,variant:"outlined",children:[e.jsx(r,{variant:"h6",gutterBottom:!0,component:"label",htmlFor:"bot-name-input",fontWeight:500,children:"Tên bot"}),e.jsx(u,{name:"botName",control:h,render:({field:t,fieldState:n})=>e.jsxs(e.Fragment,{children:[e.jsx(C,{...t,id:"bot-name-input",fullWidth:!0}),n.error&&e.jsx(r,{color:"error",children:n.error.message})]})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{name:"icon",control:h,render:({field:t,fieldState:n})=>e.jsxs(e.Fragment,{children:[e.jsx(V,{onUpload:x=>t.onChange(x)}),n.error&&e.jsx(r,{color:"error",children:n.error.message})]})})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(b,{fullWidth:!0,variant:"outlined",children:[e.jsx(r,{variant:"h6",gutterBottom:!0,component:"label",htmlFor:"bot-description-input",fontWeight:500,children:"Mô tả bot"}),e.jsx(u,{name:"botDescription",control:h,render:({field:t,fieldState:n})=>e.jsxs(e.Fragment,{children:[e.jsx(C,{...t,id:"bot-description-input",multiline:!0,maxRows:6,minRows:2,fullWidth:!0}),n.error&&e.jsx(r,{color:"error",children:n.error.message})]})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(b,{fullWidth:!0,variant:"outlined",children:[e.jsx(r,{variant:"h6",gutterBottom:!0,component:"label",htmlFor:"field-select",fontWeight:500,children:"Lĩnh vực"}),e.jsx(u,{name:"field",control:h,render:({field:t})=>e.jsx(q,{multiple:!0,value:t.value,onChange:t.onChange,renderValue:n=>e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:n==null?void 0:n.map(x=>{var w;return e.jsx(z,{variant:"outlined",size:"small",label:e.jsxs(J,{children:[e.jsx(G,{variant:"dot",color:"primary",sx:{mr:1,display:{xs:"none",sm:"inline-flex"}}}),(w=f.find(B=>B.knowId===x))==null?void 0:w.knowName]})},x)})}),children:f.map(n=>e.jsx(K,{value:n.knowId,children:n.knowName},n.knowId))})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(i,{overflow:"hidden",children:[e.jsx(r,{variant:"h6",gutterBottom:!0,htmlFor:"switch-spatial-audio",component:"label",fontWeight:500,children:"Trạng thái"}),e.jsx(r,{variant:"body1",color:"text.secondary",noWrap:!0,children:"Đang hoạt động"})]}),e.jsx(O,{defaultChecked:!0,id:"switch-spatial-audio"})]})})]})})})})}),e.jsx(v,{}),e.jsx(P,{sx:{flexDirection:{xs:"column-reverse",sm:"row"},"& > :not(:first-of-type)":{marginLeft:{xs:0,sm:p.spacing(1)},marginBottom:{xs:p.spacing(1),sm:0}}},children:e.jsxs(j,{direction:"row",justifyContent:"flex-end",spacing:1,children:[e.jsx(I,{color:"secondary",onClick:()=>{m(),a()},children:"Cancel"}),e.jsx(I,{variant:"contained",onClick:T(W),children:"Save"})]})})]})};Y.propTypes={onClose:g.func.isRequired,onUpdate:g.func,open:g.bool.isRequired};export{Y as C,J as I};
